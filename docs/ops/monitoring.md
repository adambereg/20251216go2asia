# Monitoring — Мониторинг платформы Go2Asia

Документ описывает основные объекты мониторинга и подходы к наблюдаемости (observability).

---

## 1. Цели мониторинга

- Раннее обнаружение проблем (ошибки, деградация производительности).
- Контроль SLO/SLI (время ответа, доступность).
- Сбор данных для оптимизации и планирования.

---

## 2. Что мониторим

### 2.1. Фронтенд

- Время загрузки страницы (TTFB, LCP, FCP).
- Ошибки JS в браузере.
- Частота отказов (например, ошибки сети, невозможность достучаться до API).
- Статистика по основным страницам (Atlas, Pulse, Blog, Rielt и т.д.).

### 2.2. Backend-сервисы

- Время ответа API (p50/p95/p99 latency).
- Количество запросов по эндпоинтам.
- Количество ошибок 4xx/5xx.
- Состояние БД (подключения, медленные запросы).

### 2.3. Инфраструктура

- Нагрузка на CPU/RAM/диск сервисов.
- Доступность (health-check endpoints).
- Состояние очередей/брокеров (если будут).

---

## 3. Инструменты (ориентиры)

Варианты (конкретный стек можно зафиксировать отдельным ADR):

- Для фронтенда:
  - встроенная аналитика Netlify/Cloudflare;
  - внешние сервисы (Sentry, LogRocket, Plausible и т.п.).
- Для backend:
  - Prometheus + Grafana / аналогичные managed-сервисы;
  - метрики в логах (structured logs с таймингами).

---

## 4. Алертинг

Минимальный набор:

- Рост доли 5xx ошибок > N% на интервале времени.
- Рост времени ответа API выше пороговых значений.
- Недоступность ключевых сервисов (health-check не проходит).
- Ошибки при деплое / миграциях.

Алерты могут уходить:
- в email,
- в Telegram/Slack-канал.

---

## 5. Dashboards

Создаются базовые панели:

- **Overview**:
  - число запросов,
  - ошибки,
  - latency.
- **Per-service**:
  - Atlas, Pulse, Blog, Rielt и т.д.
- **Перфоманс фронтенда**:
  - метрики загрузки страниц и ошибок.

---

## 6. Связанные документы

- `ops/logging.md`
- `architecture/caching_and_performance.md`
- `ops/environments.md`
