# Logging — Логирование в Go2Asia

Документ описывает подход к логированию на frontend и backend.

---

## 1. Принципы

- Логи — структурированные (JSON или чёткий формат).
- Логи не должны содержать:
  - пароли,
  - полные номера карт,
  - чувствительные персональные данные.
- Логи разделяются по уровням:
  - DEBUG,
  - INFO,
  - WARN,
  - ERROR.

---

## 2. Фронтенд

Логируются:

- Критические ошибки (ошибки JS, падения компонентов).
- Серьёзные проблемы с API (например, недоступность backend).
- Неудачные критические действия пользователя (например, покупка ваучера не прошла).

Отправка:

- либо в внешний сервис (например, Sentry),
- либо в лёгкий собственный endpoint `/api/log/frontend`.

---

## 3. Backend

Логируем:

- входящие HTTP-запросы (метод, путь, статус, время выполнения);
- бизнес-события (создано место, куплен ваучер, начислены Points);
- технические ошибки (исключения, таймауты, проблемы с БД);
- результаты фоновых задач.

Структура лог-сообщения (пример):

```json
{
  "timestamp": "2025-01-01T12:00:00Z",
  "level": "INFO",
  "service": "atlas_service",
  "request_id": "uuid",
  "message": "Place fetched",
  "meta": {
    "place_id": "123",
    "user_id": "456"
  }
}

---

## 4. Централизация логов

- Все backend-сервисы отправляют логи:
  - либо в общий Logging Service,
  - либо в внешний лог-сервис (ELK, Loki, Cloud Logging и т.п.).
- Логи фронтенда и backend должны иметь общий request_id / trace_id, чтобы можно было проследить цепочку.

---

## 5. Ротация и хранение

- Логи хранятся ограниченное время (например, 7–30 дней для технических логов).
- Для аналитических событий возможна длительная агрегация (с учётом анонимизации/обезличивания).

---

## 6. Связанные документы

- ops/monitoring.md
- architecture/system_architecture.md
- backend/logging_service/ (когда будет реализован)

