# Frontend Architecture — Архитектура клиентской части Go2Asia

Этот документ описывает устройство PWA-оболочки, модулей и подход к микрофронтендам.

---

## 1. Общая концепция

- Единая PWA-оболочка (Go2Asia Shell) — точка входа, общий layout, навигация, авторизация.
- Набор модулей-микрофронтендов:
  - Atlas Asia
  - Pulse Asia
  - Blog Asia
  - Guru Asia
  - Russian Friendly Asia
  - Rielt.Market Asia
  - Space Asia
  - Quest Asia
  - Connect Asia
- Модули интегрируются через:
  - единый роутинг,
  - общую дизайн-систему,
  - общие API-клиенты.

---

## 2. Стек

- **Фреймворк:** современный React-стек с SSR/SSG (Next.js).
- **Язык:** TypeScript.
- **Стили:** Tailwind CSS + дизайн-токены.
- **Состояние:**
  - локальное состояние в компонентах;
  - лёгкий глобальный стор (например, Zustand/Redux Toolkit) для auth/user/preferences.
- **Дизайн-система:** компоненты, описанные в `docs/design/`.

---

## 3. Структура фронтенд-слоя

### 3.1. PWA Shell

Основные задачи:
- рендерить общий layout;
- подключать шапку, футер, навигацию между модулями;
- обеспечивать аутентификацию и передачу токенов;
- лоадить модульные страницы по маршрутам.

Примеры маршрутов:
- `/` — главная Go2Asia
- `/atlas/*`
- `/pulse/*`
- `/blog/*`
- `/guru/*`
- `/rf/*`
- `/rielt/*`
- `/space/*`
- `/quest/*`
- `/connect/*`

---

### 3.2. Модули (микрофронтенды)

Каждый модуль:
- имеет собственную поддиректорию, компоненты и страницы;
- использует общие UI-компоненты и дизайн-токены;
- использует общий http-клиент и слой API.

Пример:
- `modules/atlas/` — страницы стран, городов, мест, гайдов.
- `modules/pulse/` — календарь событий, фильтры, детали события.
- `modules/blog/` — лента статей, страницы статьи.

---

## 4. API-слой во фронтенде

- Общий HTTP-клиент (на fetch/axios) с:
  - базовым URL,
  - интерцепторами для токенов,
  - обработкой ошибок.
- Каждый модуль имеет свой слой API-функций:
  - `api/atlasApi.ts`
  - `api/pulseApi.ts`
  - `api/blogApi.ts`
  - и т.д.
- Схема ответов типизируется через TypeScript интерфейсы.

---

## 5. Dизайн-система и переиспользование компонентов

- Компоненты базового уровня: кнопки, инпуты, карточки, модальные окна.
- Слоёв выше — модульные компоненты:
  - карточка места, карточка события, карточка статьи.
- Все модули используют единую библиотеку компонентов, чтобы визуальный стиль был непротиворечивым.

---

## 6. Точки расширения

- Добавление нового модуля:
  - регистрация маршрутов;
  - создание поддиректории модулей;
  - использование общих компонентов и API-клиента.
- Локализация/языки:
  - поддержка RU как основного языка;
  - возможность расширения до EN/VN/TH через единый i18n-слой.

---

## 7. Связанные документы

- `architecture/system_architecture.md`
- `architecture/microfrontends.md`
- `design/ui_kit.md`
- `design/design_tokens.md`
