Бэкенд микросервисы платформы Go2Asia
Go2Asia – это экосистема веб-модулей, реализованная на основе микросервисной архитектуры. Каждая ключевая часть платформы – отдельный бэкенд-сервис со своим API, отвечающий за определенную функцию (контент, социальное взаимодействие, партнерские программы, геймификацию, токеномику и т.д.). Вместе эти сервисы образуют единое пространство данных, экономики и взаимодействий для пользователей – путешественников, экспатов, локального бизнеса и PRO-кураторов. Архитектура рассчитана на модульность и масштабируемость: сервисы обмениваются данными через четко определенные REST API, а в некоторых случаях через очереди событий. Это позволяет развивать и масштабировать каждый модуль независимо, сохраняя устойчивость всей системы (сбой одного сервиса минимально влияет на другие). Ниже приведен полный список микросервисов, необходимых для работы экосистемы Go2Asia, с указанием статуса реализации на момент MVP и планов к финальному релизу. Для каждого сервиса описаны его назначение, функции, особенности/ограничения, а также связь с фронтенд-модулями и другими сервисами. Сервисы сгруппированы по категориям: Core (базовые), Content (контентные), Social (социальные), Commerce (коммерция), Gamification (геймификация), AI/ML (интеллектуальные), Tokenomics (токеномика), Technical (инфраструктурные).

Core (базовые сервисы)
User (Identity) Service – сервис пользователей и авторизации
Назначение: Централизованное управление учетными записями пользователей, аутентификацией и базовыми профилями. Этот сервис обеспечивает единый вход в экосистему: регистрация, логин, выдача токенов JWT для сессий.
Основные функции: 
- Регистрация и вход пользователей, поддержка OAuth/social login, при необходимости 2FA. 
- Хранение базовой информации профиля: имя (никнейм), аватар, краткое био, языковые предпочтения, а также статус и роль (обычный спейсер, VIP или PRO-куратор). 
- Ведение списка социальных связей – друзья, подписки/подписчики (для соц.сети Space). 
- Управление настройками приватности пользователя (что видно другим, гео-видимость в карте Guru и др.) 
- Выдача JWT-токенов при аутентификации и проверка валидности токенов через middleware в других сервисах (единая система авторизации). 
- Контроль прав доступа: пометка аккаунта как VIP или PRO для предоставления соответствующих привилегий (например, доступ к созданию квестов для PRO).
Особенности и ограничения: User Service – единственная точка истины по пользователям и фундамент безопасности системы. Все остальные сервисы доверяют ему для идентификации: любой запрос к их API сопровождается JWT токеном, выданным User Service, и проверяется на валидность и права. Остановка этого сервиса влияет на всю систему (невозможность логина, проверок прав), поэтому он должен быть отказоустойчивым. Хранение персональных данных минимизировано (только необходимые для функций профиля), а остальная логика оперирует обезличенными user_id.
Использование: Все фронтенд-модули (Guru, Atlas, Space и др.) используют User Service для регистрации/логина пользователей и получения их профилей. Другие бэкенд-сервисы при обработке запросов проверяют JWT от User Service, чтобы удостовериться в личности и ролях пользователя. Например, запрос на создание контента в Space или на получение ваучера в RF не будет обработан, если токен невалиден или у пользователя нет нужной роли – эту информацию предоставляет User Service.

Guru Service – гео-агрегатор “рядом с тобой”
Назначение: Агрегация и выдача пользователю единого списка объектов рядом – ключевой сервис, обеспечивающий работу модуля Guru Asia (карта и лента мест вокруг). По сути, Guru Service собирает данные из всех остальных контентных и партнерских модулей, чтобы выдать пользователю картину окружения в выбранной локации.
Основные функции: 
- Принимает геокоординаты пользователя (или иной заданный локус) и выполняет фан-аут запросы к нескольким источникам: местам из Atlas (включая пометку партнерских RF-мест), событиям из Pulse, объектам жилья из Rielt, людям (профилям PRO) из Space, новостям из Blog. Все полученные результаты агрегируются. 
- Нормализует разнородные данные в унифицированный формат карточек сущностей (EntityCard), чтобы на карте/списке вывести их единообразно. Карточка включает тип (place/event/stay/person/news), название, описание, координаты, дистанцию, теги, специальные метки (например, флаг RF для партнерского места), а также ссылки на действия (открыть детали, забронировать, вступить в чат и т.д.). 
- Ранжирует и сортирует результаты по релевантности: по расстоянию, времени (для событий ближайшие по времени выше в списке), популярности. Например, мероприятия, которые скоро начнутся, отображаются выше, RF-партнеры получают небольшой приоритет в выдаче, популярные места тоже поднимаются выше. 
- Фильтрует результаты по заданным параметрам: категория (еда, достопримечательности, жилье и т.д.), сейчас открыто или нет, бесплатно/платно, наличие Wi-Fi, отметка Russian Friendly и пр. Фильтрация может применяться как на бэкенде (для оптимизации) или на фронте (путем параметров запроса API). 
- Кэширует результаты по географическим тайлам (областям) – это ускоряет повторные запросы с той же местности. Кэш краткоживущий и обновляется при изменениях данных. 
- Работает в режиме грациозной деградации: если какой-то из источников недоступен, Guru вернет хотя бы данные от остальных (или из кеша последнего запроса), чтобы пользователь все равно получил частичный результат. 
- Предоставляет фронтенду единый простой API (например, GET /v1/nearby?lat=...&lng=...) – скрывая всю внутреннюю сложность интеграции множества сервисов.
Особенности: Guru Service не хранит собственный контент – он лишь временно кеширует и объединяет данные. Источник истины по местам, событиям, объявлениям жилья и т.д. остаётся за соответствующими сервисами (Atlas, Pulse, Rielt и др.). Благодаря этому, обновления данных (например, новая статья или смена статуса жилья) отражаются в Guru выдаче сразу после обновления в профильном сервисе (с минимальной задержкой на кеш). Guru – критически важен для пользовательского опыта: он является первой точкой входа для путешественника, поэтому его производительность и устойчивость напрямую влияют на впечатление от платформы. Ограничение: Guru полностью зависит от актуальности и качества данных в других модулях; при отсутствии информации в источниках (например, нет событий или мест поблизости) ему нечего показать.
Использование: Фронтенд Guru Asia вызывает Guru Service для получения списка объектов “рядом” каждый раз, когда пользователь открывает карту или меняет свое местоположение. Другие сервисы напрямую Guru не вызывают (скорее, наоборот – Guru обращается к ним). Однако Guru косвенно влияет на остальные модули: он перенаправляет трафик к ним – пользователь, кликнув на карточку места или события в Guru, переходит в соответствующий модуль (детальная страница в Atlas, Pulse, Rielt, Space или Blog). Таким образом, Guru выступает навигационным хабом, связующим все сервисы воедино.
(В категорию Core входят фундаментальные сервисы платформы. User Service и Guru Service закладывают основу экосистемы: единая система пользователей и интегрированный агрегатор данных. Эти сервисы были приоритетны и реализованы к MVP, т.к. без них невозможна работа других модулей.)

Content (контентные сервисы)
Atlas Service – Wiki-энциклопедия локаций
Назначение: База знаний о географических объектах Юго-Восточной Азии – страны, города, районы, места (достопримечательности, рестораны, пляжи и т.д.). Atlas Asia является фундаментальным контентным модулем, предоставляя структурированную справочную информацию о локациях и служа единым справочником геоданных для всей экосистемы.
Основные функции: 
- Хранение подробной информации о местах: название, описание, координаты (широта/долгота), адрес, категория (тип места, например, park, restaurant), теги (например, wifi, vegan), фотографии галереи и др. вики-данные. 
- Организация данных по иерархии: страны → города → отдельные объекты. Возможность связать объекты (например, место принадлежит району, город – стране). 
- Предоставление API для чтения данных: например, получить список городов страны, список мест в городе с фильтрацией по категориям, поиск мест по названию или тегам. Другие сервисы используют этот API вместо хранения дубликатов геоданных. 
- Обновление и модерация контента: поддерживается смешанная модель наполнения – часть статей добавляется и редактируется редакцией, также предусмотрена user-generated wiki-механика (PRO-пользователи и сообщество могут предлагать правки). Модераторы Atlas проверяют и утверждают изменения, поддерживая актуальность и достоверность. 
- Выдача гео-справочника для других модулей: Atlas выступает базой географических справочных данных – предоставляет сервисам информацию о городах и местах (названия, координаты) для привязки своих объектов. Например, событие Pulse хранит place_id места проведения из Atlas, объявление Rielt – city_id и district_id из Atlas и т.д..
Особенности: Atlas – база для всех контентных сервисов. Другие модули не дублируют геоинформацию, а обращаются к Atlas по идентификаторам. Это обеспечивает консистентность: если в Atlas обновилось название или категория места, изменения автоматически увидят и Pulse, и Rielt, и Guru при следующем запросе. Atlas API используется не только внутренними сервисами, но и может быть открыт для внешних интеграций (например, чат-бот, подсказывающий информацию о месте, может дергать Atlas). Russian Friendly интеграция: партнерские места RF фактически являются подмножеством Atlas-мест, отмеченных специальным флагом rf_badge. Некоторая информация о них может дублироваться/расширяться в отдельной RF базе, но гео-данные (адрес, координаты) всё равно берутся из Atlas.
Использование: Guru Service запрашивает Atlas для получения списка мест в заданном радиусе, а также для гео-контекстной информации (например, определяет, какой город соответствует координатам пользователя). Pulse Service при создании или отображении события получает через Atlas данные места проведения (название места, адрес) по place_id. Rielt Service при сохранении нового объявления вызывает Atlas для получения ID города/района по указанному адресу (геокодирование) и проверки наличия такого города в базе. Blog Service может привязывать статьи к определенному городу или месту, храня ссылки (ID) на Atlas для контекстного отображения (“статьи об этом месте”). Таким образом, Atlas взаимодействует практически со всеми сервисами, выступая общим справочником локаций.

Pulse Service – календарь событий
Назначение: Сервис актуальных мероприятий и событий в регионе (модуль Pulse Asia). Формирует афишу событий и исторический архив, отражая “ритм жизни” стран ЮВА. Позволяет пользователям узнавать, что интересного происходит вокруг – от фестивалей и встреч до экскурсий и концертов.
Основные функции: 
- Хранение информации о событиях: название, описание, категория (тип события – концерт, выставка, встреча и т.п.), время и дата проведения, продолжительность, а также место проведения (связано с определенным объектом Atlas или RF-партнером). 
- Поддержка двух режимов использования: - “Здесь и сейчас” афиша: список ближайших предстоящих событий с фильтрами по дате (сегодня, завтра, выходные) и категории. Эти данные встраиваются, например, в Guru (раздел “События рядом”). - Архив/хроника событий: база прошедших мероприятий, формирующая историческую летопись жизни региона. Прошедшие события не удаляются, а сохраняются, что позволяет анализировать историю (и, например, использовать эти данные для статей в блоге или рейтингов). 
- Интеграция с пользователями и партнерами: события могут добавляться как: - PRO-организаторами (опытными пользователями, проводящими встречи, туры), - бизнес-партнерами (например, партнер RF, организующий событие), - рядовыми пользователями, предлагающими мероприятие (с последующей модерацией). 
- API для получения списков событий (с фильтрами по дате, локации, категории) и деталей конкретного события. 
- Взаимосвязь с другими сервисами: например, создание чата для события в соцсети Space (чтобы участники могли обсудить) или указание организатора события – ссылки на профиль PRO или страницу партнера RF.
Особенности: Pulse выполняет двойную роль: оперативная афиша и исторический архив. 
Интеграция – ключевая особенность: 
- Guru Service запрашивает у Pulse список событий рядом с пользователем (по гео-координатам) и выводит их на карту/список “рядом”. 
- Atlas: каждое событие имеет привязку к месту (атрибут place_id связанный с Atlas или RF) – поэтому Pulse при сохранении события требует указать место из Atlas, не дублируя адресную информацию. 
- Space: участники событий могут отмечаться/подписываться на событие, и тогда в Space может появиться соответствующий чат или пост. Организатор события – обычно PRO-пользователь – также связывается с соцсетью (профиль PRO). Активность PRO-организаторов учитывается в экономике (см. Connect). 
- Blog: интересные события могут дать материал для статей – команда блога может публиковать репортажи о прошедших фестивалях или анонсы крупных событий. 
- Connect: если PRO проводит много популярных мероприятий, ему могут начисляться Points или бейджи (через события Pulse → Token Service) в качестве поощрения.
Использование: Guru – основной потребитель, получая события “рядом”. Space – отображает события, на которые пользователь подписан или собирается пойти (например, отдельный раздел “Мои события”), и создает групповые чаты для обсуждения событий. Quest – может использовать события как шаги квеста (например, “посети фестиваль X”) – для этого Quest Service обращается к Pulse API, чтобы проверить существование события и отмечать участие. Connect – получает от Pulse события активности PRO (организация мероприятий) и конвертирует в награды Points/NFT за достижение определенных показателей (например, 10 успешно проведенных мероприятий).

Media Service – сервис публикации статей (Blog)
Назначение: Бэкенд для Blog Asia – медиаплатформы экосистемы. По сути, Media Service выступает как headless CMS, обеспечивая создание, хранение и выдачу статей: редакционного контента, партнерских материалов и отобранных UGC-постов сообщества.
Основные функции: 
- Публикация и хранение статей: хранит текст, заголовок, медиа (фото/видео), метаданные статей блога. Редакция Go2Asia через этот сервис создает и редактирует контент (через админ-интерфейс). 
- Управление контентом: поддерживает черновики, статусы (черновик → опубликовано), расписание отложенных публикаций (schedule). Также версии/правки статьи для возможности отката или модерации изменений. 
- Категории и теги: ведет рубрикатор тем, теги, SEO-метки (slug для URL) для статей, чтобы организовать контент и облегчить поиск. 
- Интеграция с другими источниками: - Получение контента от Space: если какой-то пользовательский пост из соцсети выбран в качестве лучшего и одобрен модераторами для публикации, Media Service импортирует текст и медиа этого поста (с согласия автора) как статью. - Прием статей от PRO/партнеров: PRO-кураторы или партнеры могут через специнтерфейс прислать свою статью/новость; Media Service ставит ее в очередь на модерацию и, при одобрении, публикует от их имени. 
- Связь с объектами экосистемы: у модели статьи есть поля привязки к локации (city/place из Atlas) или другим сущностям, чтобы, например, помечать, к какому городу относится статья. Это позволяет на странице города в Atlas показать подборку последних новостей/статей по этому городу. Также при публикации статьи сервис может генерировать анонс в Space – например, создавать пост-ссылку, чтобы подписчики автора или группы увидели новую статью.
Особенности: Blog Asia объединяет три источника контента – редакционные статьи, материалы от PRO/партнеров и лучшие посты из сообщества. Media Service реализует эту схему, обеспечивая модерацию (авторизованные редакторы могут редактировать или отклонять предложения контента). 
Интеграция: Blog тесно связан с остальными модулями – он ссылается на Atlas и Pulse для контекста (упоминание мест и событий в тексте), получает данные из Space (UGC-контент) и взаимодействует с Connect (начисление авторских вознаграждений за популярные статьи). Это значит, Media Service в связке с Token Service может, например, сгенерировать событие “content_featured” (пост попал в блог) для начисления Points автору.
Использование: 
Фронтенд Blog Asia запрашивает список статей, ленты по темам и содержимое статей через API Media Service (например, GET /v1/articles?category=...). 
Space взаимодействует двунаправленно: лучшие посты Space передаются в Media Service для публикации, а Media Service создает запись-уведомление в Space о новой статье (чтобы пользователи могли обсудить статью через соцсеть). 
Atlas/Pulse: страницы мест или событий могут отображать ссылки на связанные статьи блога (Media Service по запросу вернет статьи, привязанные к данной локации или событию). 
Connect: при достижении статьей определенной популярности (например, набрала 10000 просмотров) Media Service может отправить событие в Token Service для награждения автора Points, что поддерживает мотивацию авторов.
(Контентные сервисы отвечают за информационное наполнение платформы. Atlas был реализован к MVP как критическая основа данных. Pulse и Blog – более сложные и зависящие от сообщества – их основные механики были спланированы, но полноценно запускаются поэтапно. К финальному релизу все три компонента должны работать совместно, обеспечивая пользователям актуальную информацию обо всем: от справочных сведений и событий до расширенных статей.)

Social (социальные сервисы)
Content Service – сервис пользовательского контента
Назначение: Бэкенд для социальной сети Space Asia: хранение и управление всем пользовательским контентом – прежде всего, постами/записями и сопутствующими данными (комментарии, вложения). Этот сервис охватывает UGC-контент, который менее структурирован, чем данные модулей Atlas/Pulse, и создается самими пользователями.
Основные функции: 
- Создание новых постов: сохранение текста записи, отметок приватности (приватная заметка, только друзья или публично), прикрепленных медиа (фото, видео) и метаданных (например, ссылка на место Atlas или хэштеги). 
- Редактирование и удаление постов пользователями (с проверками прав: можно редактировать только свое и т.п.). 
- Хранение комментариев к постам и механизмов лайков/реакций осуществляется через Reactions Service. 
- Медиа-хранилище: прием загрузок изображений/видео, интеграция с облачным CDN для их хранения и выдачи. Content Service может сохранять URL загруженных медиа (а сами файлы – на внешнем сервисе хранения). 
- Модерационные атрибуты: пометка контента (флаг “спам/жалоба”), статусы поста (активен, скрыт модератором и т.д.) Модераторы Space через административный интерфейс могут запрашивать Content Service для получения списка жалобных постов, бана пользователей и др.
Особенности: Content Service тесно интегрирован с Feed Service – вместе они образуют серверную часть соцсети Space. Когда создается новый пост, Content Service уведомляет Feed Service о новом контенте, чтобы тот распространил запись по лентам подписчиков. Кроме того, Content Service предоставляет универсальный API для работы с записями, которым могут пользоваться другие модули: к примеру, Quest Service после прохождения квеста создает итоговый пост-отчет в Space, обращаясь к API Content Service. Также партнерский модуль RF может использовать этот сервис для добавления “социальных отзывов” – пользователь, посетив партнерское место, пишет отзыв (пост) в Space, а RF-сервис привязывает его к профилю заведения. 
Ограничения: Content Service должен масштабироваться под потенциально очень большое количество пользовательских постов. Он оптимизирован под запись/чтение коротких текстов и медиа. Потенциально, для MVP, объем контента небольшой, но при росте аудитории нужны механизмы шардирования или распределения нагрузки. Также важна быстродействующая фильтрация (например, выборка постов по автору, группе, тегу) – возможно, требуются индексы или кэши.
Использование: Space Asia фронтенд обращается к Content Service для операций: создать пост (POST /v1/posts), получить список постов пользователя или группы (GET /v1/posts?author_id=... или /v1/groups/{id}/posts), добавить комментарий (POST /v1/posts/{id}/comments) и т.п. Feed Service получает от Content Service события (новый пост, удален пост и т.д.) и также может запрашивать контент напрямую (например, чтобы собрать подборку популярных постов). Quest Service создает посты-отчеты через Content API. Blog может обращаться, чтобы извлечь текст и медиа поста, выбранного для публикации (хотя, вероятно, это делается через админку вручную). RF Service анализирует отзывы – по сути, читает посты, помеченные как отзывы о партнерских местах (например, по хэштегу или привязке place_id) – для формирования рейтинга места и сбора обратной связи.

Feed Service – сервис ленты новостей
Назначение: Формирование персональной новостной ленты пользователя в Space Asia. Если Content Service отвечает за хранение постов, то Feed Service – за их доставку в нужном порядке конкретным пользователям, то есть за механику соцсети “кто что видит в своей ленте”.
Основные функции: 
- Агрегация подписок: хранит списки подписок каждого пользователя – на других пользователей (друзья/фолловинг), на группы, возможно на теги. На основе этих данных определяет, какие новые посты потенциально релевантны каждому. 
- Формирование ленты: получает из Content Service новые посты (через уведомление или запрос) и распределяет их по лентам: подписчики автора должны увидеть этот пост. Также собирает контент из групп, на которые подписан пользователь, и рекомендованные посты (например, популярные в целом или подходящие по интересам). 
- Ранжирование: определяет порядок отображения постов – например, более новые выше, либо используется алгоритм с учетом популярности (количества лайков) и персональных интересов. В будущем здесь могут применяться ML-алгоритмы рекомендаций (см. раздел AI/ML). 
- Фильтрация и персонализация: может фильтровать нежелательный контент (например, скрывать скрытых пользователей) или выдавать разные посты разным пользователям даже при равных подписках, основываясь на их взаимодействиях. 
- Обновление ленты в реальном времени: при появлении нового поста Feed Service сразу (или с минимальной задержкой) “рассылает” его по лентам. Это может быть реализовано либо push-уведомлением (веб-сокет) пользователям онлайн, либо просто сохранением в базу “посты ленты” для каждого пользователя с возможностью запросить.
Особенности: Feed Service функционирует в паре с Content Service – вместе они являются ядром соц. сети. Он получает оповещения о новом контенте: “Content Service сообщает: пользователь X опубликовал пост Y” – и в ответ вычисляет, кому этот пост должен быть доставлен, и добавляет его в их фиды. Также Feed Service поддерживает механизм выявления популярных постов: например, периодически анализирует, какие записи набрали много лайков, чтобы пометить их как “тренд” или вынести в рекомендованное. Эти данные используются не только для пользователей, но и для отбора контента в Blog (алгоритм может подсказать модераторам, какие пользовательские посты достойны публикации). 
Ограничения: Хранение персональных лент для каждого пользователя может привести к дублированию (один пост хранится в фидах тысяч пользователей). Для масштабирования могут использоваться более сложные подходы (генерация ленты “на лету” по запросу). На MVP с малым числом пользователей можно было обойтись простым решением.
Использование: Фронтенд Space запрашивает у Feed Service ленту текущего пользователя (GET /v1/feed), получая уже готовый отсортированный список постов с необходимыми данными. Feed Service обращается к Content Service, если нужно подтянуть подробности поста или автора (хотя обычно необходимая информация кэшируется). Blog модерация: модераторы могут использовать данные Feed (самые популярные посты) как кандидатов для блога. В целом, взаимодействие Feed с внешними сервисами минимально – он в основном получает данные от Content и отдает фронту, выполняя внутреннюю задачу распределения.

Reactions Service
Reactions Service — универсальный микросервис, отвечающий за все формы пользовательского взаимодействия с контентом и сущностями в экосистеме Go2Asia.
С учётом новой модели коммуникации сервис служит центральным слоем социального взаимодействия, полностью заменяя собой комментарии и большую часть сценариев чата.
Любое действие пользователя по отношению к объекту платформы фиксируется как реакция с типом, целевым объектом и опциональным payload.
Типы реакций (расширенная модель)
•	like — отметка “понравилось”.
•	repost — репост контента пользователем (включая “репост с мнением”, создающий новый пост в Space Asia).
•	rating — оценка (например, место, жильё, событие).
•	short_review — короткий отзыв (до N символов).
•	feedback — текстовая реакция общего типа.
•	completed — прохождение квеста, выполнения задачи и т.п.
•	bookmark — сохранение объекта в избранное.
•	question — вопрос автору/организатору.
•	contact_request — запрос на контакт/связь (например, перед бронью жилья).
•	thread_reply — ответ внутри созданной “ветки общения” (тикета), где требуется асинхронная коммуникация между пользователями, но без real-time чата.
Принцип: реакция = любое взаимодействие пользователя с объектом или другим пользователем через объект.
Структура реакции
Каждая реакция включает:
•	type — тип реакции.
•	target — пара (target_type, target_id) (например: blog_post:123, event:456, listing:789).
•	user_id — инициатор.
•	payload (опционально):
o	текст отзыва,
o	оценку,
o	ссылку на созданный пост (в случае repost-with-comment),
o	данные вопроса,
o	id ветки общения (thread_id) и содержание ответа.
•	meta — дату, язык клиента, платформу и др.
API
•	POST /api/reactions — создать реакцию.
•	DELETE /api/reactions/:id — удалить (модерация или отмена).
•	GET /api/reactions/stats?target=type:id — агрегированная статистика по объекту.
•	GET /api/reactions/list?target=type:id&type=like|rating|short_review… — список реакций.
•	(опционально) GET /api/reactions/user/:user_id — реакции пользователя.
Интеграции
Reactions Service отправляет события в Event Bus:
•	reaction.created
•	reaction.deleted
•	reaction.flagged
•	thread.reply.created (для тикетов)
И взаимодействует с:
•	Notification Service — уведомления о репостах, вопросах, отзывах, ответах в тредах.
•	Connect Service — начисление Points/NFT за репосты, отзывы, завершение квестов.
•	Space Service — создание постов при репосте с мнением.
•	Content Services (Atlas, Pulse, Blog) — получение статуса и статистики реакций.
•	Moderation / Trust & Safety Service — автоматическая проверка отзывов, вопросов и т.д.
Anti-fraud и модерация
Reactions Service реализует:
•	лимиты (например, 1 лайк на объект в сутки, 1 отзыв на бронирование),
•	троттлинг действий пользователя,
•	soft-moderation для отзывов и вопросов,
•	ручное удаление реакций по жалобе.
Роль сервиса: создаёт единый формальный язык взаимодействия пользователей с объектами Go2Asia — от лайков и отзывов до вопросов авторам и полудиалоговых “веток общения”. В платформе больше нет классических комментариев и чатов, вся коммуникация структурирована через реакции.
________________________________________
Thread / Inquiry Model (расширение реакционной архитектуры)
Для сценариев, где требуется асинхронное общение (например: арендатор ↔ хозяин жилья, участник ↔ организатор события), используется лёгкая модель “веток общения” (threads), а не чат.
•	Каждая ветка создаётся:
o	реакцией type = question,
o	или реакцией type = contact_request,
o	или системной сущностью booking_inquiry, event_inquiry.
•	Ответы внутри ветки → реакции type = thread_reply с payload.thread_id.
•	Модель полностью работает на HTTP API, не требует WebSockets.
•	Notification Service уведомляет участников ветки об ответах.
Это создаёт диалог, но без мессенджера — контролируемый, асинхронный, юридически более простой.
________________________________________

Commerce (коммерческие сервисы)
Rielt Service – сервис объявлений жилья
Назначение: Бэкенд сервиса Rielt.Market Asia – платформы размещения и поиска жилья для аренды в регионе. Обеспечивает пользователям удобный поиск квартир/домов, а владельцам и агентам – размещение объявлений. Интегрирован в экосистему, чтобы путешественник мог сразу на карте Guru видеть не только места и события, но и доступное жилье поблизости.
Основные функции: 
- Хранение базы объявлений о жилье: каждый листинг содержит данные объекта недвижимости – тип (квартира, дом), описание, список удобств (amenities: Wi-Fi, кухня и т.п.), цену и валюту (например, 1500 RUB/ночь), условия аренды (краткосрочная/долгосрочная), статус доступности (свободно или занято на даты). Также указаны координаты/адрес (связанные с Atlas – город, район) и, при наличии, отметка Russian Friendly (если владелец партнер). 
- Добавление новых объявлений: владельцы жилья или посредники (чаще всего PRO-кураторы или партнеры) через фронтенд Rielt размещают объект. Rielt Service сохраняет запись, геокодирует адрес – определяет координаты и привязывает к справочнику Atlas (город/район). Если владелец является RF-партнером, объявление помечается значком RF (это важно для доверия русскоязычных арендаторов). 
- API поиска и фильтрации: позволяет получать список объявлений по заданным критериям: - По географии: например, GET /v1/listings?city=Bangkok&district=... – все предложения в Бангкоке. - По типу/сроку: параметр type=short_term или long_term. - По близости: GET /v1/listings/nearby?lat=X&lng=Y – объекты аренды рядом с заданной точкой. - По цене, наличию удобств и др. – в перспективе. 
- Просмотр и отклик: выдача полной информации по конкретному объявлению (GET /v1/listings/{id}), включая контакты (или скрытые контакты, если коммуникация должна идти через чат). Когда пользователь заинтересован – он может нажать “Связаться/Забронировать”. Тогда Rielt Service создает заявку на аренду (Rent Request) – связывает арендатора и арендодателя, помечает объявление как получившее отклик. 
- Поддержка сделки: после создания заявки владелец и арендатор могут обменяться сообщениями (интеграция с чат-сервисом) или контактами. Статус заявки обновляется (например, “в процессе обсуждения”, “договорились”, “отклонено”). В MVP, вероятно, прямая оплата и бронирование не реализованы, но на будущее возможно добавление платежей и аренды через платформу. 
- Верификация объектов: PRO-кураторы могут проверять жилье (физически инспектировать) и отмечать объявление как “проверено” (это может быть отражено бейджем). Russian Friendly партнеры гарантируют определенный уровень сервиса, что отмечается в объявлении.
Интеграция с экосистемой: 
- Guru Service по API Rielt запрашивает объекты рядом и отображает их на карте среди прочих результатов. Пользователь видит метки жилья и может перейти на страницу объявления в Rielt.Market для деталей. 
- Atlas – используется для привязки объявлений к локациям. Город/район объявления выбираются из Atlas, а не вводятся вручную, что упрощает фильтрацию и поиск по местоположению. 
- Russian Friendly: многие владельцы – RF-партнеры, поэтому Rielt тесно связан с RF программой. RF-пометка в объявлении означает, что место прошло определенный отбор и ориентировано на русскоязычных (например, хозяин говорит по-русски). Также такие объявления могут содержать ваучеры на скидку от партнера. 
- Connect: В финальной модели возможно поощрение активности – например, вознаграждение Points обеим сторонам за успешную аренду, а PRO-куратору (если он посредник) – бонус G2A. Пока это гипотетически (MVP мог не включать транзакционную экономику в Rielt).
Ограничения: Запуск Rielt требует наличия партнеров/пользователей, готовых размещать реальные объявления. Для MVP, вероятно, сервис был в зачаточном состоянии или наполнен демонстрационными данными. К финальному релизу планируется наполнить базу через партнерскую сеть (агентства, PRO в популярных локациях).
Использование: Фронтенд Rielt.Market – отдельный модуль (веб-сайт на поддомене rielt.go2asia.space) для просмотра объявлений и кабинета владельца. Он взаимодействует напрямую с Rielt Service: поиск, фильтры, создание объявления – всё через REST API. Guru – при запросе “рядом” дергает .../listings/nearby и получает список близлежащего жилья, который включает в общую выдачу. RF – статистика успешных сделок с RF-партнером может учитываться для PRO-куратора, пригласившего этого партнера (через Connect, см. ниже). Connect – (планируется) получение события “rent_completed” для начисления участникам Points (стимулирование использования внутренней экономики).

Voucher Service – сервис ваучеров и спецпредложений
Назначение: Техническая основа функциональности партнерских скидочных ваучеров программы Russian Friendly. Позволяет локальным бизнес-партнерам создавать и распространять через платформу специальные предложения (купоны на скидку, бонусы), а пользователям – получать и использовать эти предложения.
Основные функции: 
- Создание оффера: партнер (например, владелец ресторана - RF участник) через личный кабинет RF формирует предложение: указывает тип (процент скидки, подарок, фиксированная сумма и т.д.), описание, условия (срок действия, сколько раз можно использовать). По запросу Voucher Service генерирует уникальный код или QR для этого предложения. 
- Хранение ваучеров: база сервисa хранит все выпущенные ваучеры, включая их состояние: доступен, получен пользователем, использован. Например, если доступно 100 скидок, сервис отслеживает, сколько уже взяли. 
- Получение ваучера пользователем: когда пользователь нажимает “Получить скидку” (на карточке места в Guru или в разделе акций RF), фронтенд вызывает Voucher API (например, POST /v1/vouchers/{offer_id}/claim). Voucher Service отмечает ваучер как выдан конкретному пользователю, возможно присваивает ему персональный код. Пользователю возвращается QR-код или код для предъявления в заведении. 
- Погашение ваучера: когда пользователь приходит к партнеру и использует ваучер (например, показывает код официанту, а тот вводит код в системе или просто отмечает в кабинете “использовано”), Voucher Service получает сигнал об использовании. Он помечает ваучер как redeemed (использован) и больше не дает его активировать повторно. (Метод может быть POST /v1/vouchers/{code}/redeem, доступный партнеру.) 
- Аналитика и управление: партнер может через API или веб-интерфейс получать статистику по своим офферам: сколько пользователей посмотрели предложение, сколько активировали (скачали) ваучер, сколько реально пришли и воспользовались (redeemed). Эти данные также видит PRO-куратор, который привлек данного партнера – для оценки эффективности акций.
Особенности: Voucher Service интегрирован с другими модулями: 
- Guru Service: при формировании карточек мест Guru обращается (косвенно через RF сервис) к Voucher Service, чтобы узнать, есть ли у данного места активные предложения. Если есть – Guru включает в карточку места отметку (значок 🎁 или текст) и возможность получить ваучер. 
- Quest Service: может резервировать выдачу ваучера как награду за выполнение квеста. Например, квест “Гастро-тур” может включать получение скидки в ресторане – тогда по завершении квеста Quest Service запросит Voucher Service сгенерировать или выделить ваучер конкретному пользователю. 
- Russian Friendly (RF) Service: интерфейс партнера (админ-панель) вызывает API Voucher Service для создания/редактирования акций. PRO-куратор, курирующий партнера, также взаимодействует – может помочь заполнить данные оффера. 
- Connect: использование ваучера – показатель активности, но напрямую, скорее всего, Points не начисляются за само использование (хотя возможны варианты: например, первый использованный ваучер приносит бонус Points пользователю и куратору – это можно реализовать отправкой события от RF/Voucher Service в Token Service). Основное вознаграждение за ваучеры – реальная скидка, но косвенно Connect поощряет PRO кураторов токенами за успешные кампании (см. RF Service).
Ограничения: эффективность сервиса зависит от количества и качества партнерских предложений. Нужно избежать злоупотреблений (один пользователь не должен бесконечно фармить скидки; для этого – ограничения по одному ваучеру в руки). Также важна простота использования: MVP-реализация может быть довольно простой (статичный код на скидку), но к финалу нужна полноценная система с уникальными кодами, интеграцией с кассами партнеров (что может потребовать вручную помечать использование).
Использование: Пользователи через Guru или RF раздел просматривают список доступных акций (Voucher Service предоставляет, например, GET /v1/offers?place_id=...). При нажатии “получить” – фронт дергает Voucher Service, и тот возвращает код ваучера пользователю. Партнеры в своем кабинете используют функции Voucher Service: создание (POST /v1/offers), управление (изменение условий), просмотр статистики (например, GET /v1/offers/{id}/stats). Quest – вызывает резервирование ваучера (например, POST /v1/offers/{id}/assign?user=...) по завершении квеста. Guru – автоматически включает информацию о наличии акции в карточку места через внутренний вызов к Voucher Service.

Russian Friendly (Partner) Service – сервис партнерской программы 
Назначение: Управление каталогом партнерских точек Russian Friendly Asia (RF Asia) – локальных бизнесов, ориентированных на русскоязычных путешественников, и взаимодействием с ними. Этот модуль соединяет сообщество Go2Asia с бизнесом: формирует доверенный каталог проверенных мест (рестораны, кафе, отели, сервисы и пр.), поддерживает коммуникацию PRO-кураторов с этими бизнесами и интеграцию их предложений (ваучеров, квестов и т.д.).
Основные функции: 
- Ведение каталога партнеров: хранение информации о каждом RF-партнере – название заведения, описание, категория (кафе, магазин, отель и т.п.), адрес/координаты (связаны с Atlas), контактные данные, фотографии. Флаг верификации RF и дата вступления в программу. По сути, это похоже на базу мест Atlas, но с дополнительными полями (например, имя контактного лица, язык общения, предоставляемые бонусы). 
- Связь с Atlas: многие партнерские места уже существуют как объекты Atlas. RF Service может хранить только ссылку на atlas_id и дополнительные данные партнера (например, статус RF, PRO-куратор, оферы). В документации отмечено, что модель места частично дублируется в RF для партнерских мест, т.е. может существовать таблица RFPlaces со ссылкой на AtlasPlace + поля партнерской программы. 
- Управление партнерством: назначение к каждому партнеру PRO-куратора – ответственного опытного пользователя, который его привлек и курирует. Хранение связки “партнер → куратор” (возможно, и “куратор → список его партнеров”). Ведение статусов: активно ли партнерство, выполнены ли KPI (например, обновил профиль, запустил акции, получил отзывы). 
- Кабинет партнера: аутентификация бизнес-партнера (вероятно, партнеры также заводятся как особые аккаунты в User Service или отдельная сущность). Предоставление API/интерфейса, через который партнер: - редактирует профиль своего места (описание, часы работы, фото), - публикует спецпредложения (взаимодействуя с Voucher Service), - просматривает отзывы посетителей (см. ниже) и статистику (сколько было просмотров страницы, сколько ваучеров скачано/использовано). 
- Сбор отзывов и рейтингов: после того как пользователь посетил RF-место, он может оставить отзыв – обычно это реализовано как пост-рассказ в Space, помеченный как отзыв о конкретном месте (например, через хэштег или функционал “написать отзыв” на странице места). RF Service получает эти данные от соцсети и отображает их в профиле партнера, подсчитывает рейтинг (например, средняя оценка или число позитивных отзывов). Это мотивирует бизнес поддерживать качество. 
- Вовлечение PRO-кураторов: PRO видят список своих партнеров, статистику их вовлеченности (количество выданных ваучеров, отзывы и т.п.). PRO-куратор может помогать партнеру – например, заполнить профиль, добавить контент, придумать квест или акцию для продвижения. Эти действия неявно фиксируются: активный куратор, у чьих партнеров хорошая активность, может получить вознаграждения (см. Connect). 
- API для интеграции данных: выдача списка партнерских мест (для отображения на карте или в отдельном разделе каталога RF), фильтрация по категориям/локации, получение профиля партнера (детали, отзывы, оферы). Guru при сборе “рядом” использует эти API, но, возможно, через Atlas (если партнер интегрирован как место Atlas с rf_badge).
Особенности: 
Мост между соцсетью и бизнесом: RF Service связывает Space и Commerce: с одной стороны, бизнес получает доступ к аудитории (через каталог и ваучеры в Guru), с другой – сообщество получает гарантии качества (статус RF, отзывы). PRO-кураторы играют роль посредников и амбассадоров: они приводят новые бизнесы, консультируют их по работе с платформой, а взамен получают бонусы (Points или токены) за успешное развитие партнеров. 
Интеграция с геймификацией: контент RF (места, ваучеры) активно используется в квестах – многие квесты включают посещение партнерских локаций, получение там бонусов. Это вовлекает бизнесы в игровой формат продвижения. 
Экономика: Connect учитывает события RF: приглашение нового партнера (связка PRO→Partner) может приносить PRO вознаграждение G2A токенами, если партнер активен (например, выполнил KPI по числу ваучеров). Также за каждого пользователя, воспользовавшегося ваучером, PRO может получить Points (отражение его вклада).
Использование: 
Guru при выполнении запроса “рядом” получает от RF Service список партнерских мест в окрестности (либо через Atlas, помеченных rf_badge). 
Space – источник отзывов: пользователи публикуют в Space рассказ о посещении партнера, RF Service получает уведомление/данные (может быть реализация: Space пост помечен ID партнера, RF Service через поиск или подписку узнает о новом отзыве). 
Quest – при создании квеста PRO-куратор через Quest Service выбирает точки из каталога RF (например, выбирает 5 ресторанов-партнеров для гастротура), Quest Service запрашивает у RF Service список доступных партнеров по параметрам (город, категория) либо конкретные ID для проверки. 
Tokenomics – RF Service отправляет события в Token Service: “partner_referred” (когда PRO привлекает нового партнера), “partner_kpi_met” (партнер достиг определенного результата), “voucher_used” (ваучер партнера использован пользователем) – все они ведут к начислениям Points/G2A соответствующим участникам. 
Партнеры и PRO напрямую взаимодействуют через веб-интерфейс RF (кабинет, панель PRO) – эти интерфейсы вызывают API RF Service для получения и обновления данных (список партнеров PRO, метрики, создание записи и т.п.).

Gamification (сервисы геймификации)
Quest Service – сервис квестов и миссий
Назначение: Реализация механики игровых квестов в экосистеме (модуль Quest Asia). Сервис позволяет создавать, проводить и отслеживать многошаговые квесты для пользователей, добавляя игровой слой к путешествиям и жизни в ЮВА. Квесты поощряют пользователей выполнять разнообразные задания, повышая вовлеченность и предоставляя возможность заработка вознаграждений.
Основные функции: 
- Создание и хранение структуры квеста: квест состоит из ряда точек (локаций или шагов) и заданий (миссий) на каждой точке. Quest Service хранит описание каждого квеста: последовательность миссий, привязанные места/события и условия выполнения. Например, квест может включать миссии: “посети место X”, “присутствуй на событии Y”, “сделай фото на фоне Z и выложи в Space”. 
- Валидация точек и заданий: при создании или редактировании квеста PRO-организатор выбирает реальные объекты из других сервисов – места из Atlas/RF, события из Pulse. Quest Service обращается к соответствующим API, чтобы проверить существование этих объектов и сохранить ссылки (например, сохраняет place_id каждой точки, event_id для миссии посетить событие). Это гарантирует, что квест привязан к актуальным данным и все точки распознаются системой. 
- Отслеживание прогресса участников: когда пользователь начинает квест, сервис создает запись прогресса. По мере выполнения миссий (например, пользователь отметился в локации или загрузил фото-отчет) Quest Service помечает эту миссию как выполненную для данного пользователя. Он знает, сколько и какие шаги осталось пройти. 
- Проверка доказательств: для некоторых миссий требуются доказательства – например, фото с локации или GPS чек-ин. Пользователь через фронтенд Quest загружает требуемое (фото, либо просто нажимает “Check-in”), Quest Service сохраняет эти материалы и, если нужно, отправляет на проверку организатору квеста (PRO). PRO-организатор через свой интерфейс видит загруженные доказательства и подтверждает или отклоняет выполнение (в случае читерства). 
- Завершение квеста и награждение: когда пользователь выполнил все миссии, Quest Service фиксирует завершение квеста и генерирует событие quest_completed (с деталями: kвест, кто прошел). Это событие он отправляет во внутреннюю экономическую систему (Token Service), чтобы тому начислить награды. Набор наград и их величина задается логикой квеста: - Простые квесты могут давать только Points (например, +100 Points). - Сложные квесты – больше Points, а также уникальный NFT-бейдж за достижение. - Для PRO-организатора может предусматриваться вознаграждение: либо процент от Points, заработанных участниками, либо фиксированный бонус G2A токенов. Quest Service сам определяет, что положено выдать, согласно настройкам квеста, но начисление выполняет связка Connect/Token Service (он надежно проводит транзакции). 
- Рейтинги и статистика: сервис собирает статистику по квестам: сколько пользователей прошли, средний прогресс, популярность. Формирует рейтинги PRO-организаторов (кто провел больше успешных квестов, у кого выше средняя оценка и т.п.). Эти данные могут передаваться в Connect для присвоения достижений (например, бейдж “Quest Master” для PRO, у которого 10 успешных квестов).
Особенности: Quest Service – один из самых интегрированных модулей: 
- Он объединяет контентный слой (Atlas/Pulse места и события), партнерский слой (RF места, ваучеры), социальный слой (Space – публикация отчетов, коммуникация) и экономику (Points/NFT награды). Пример: квест “Гастро-тур” использует список RF-ресторанов, выдает ваучеры этих ресторанов за выполнение, требует фотоотчеты в Space, и за все это участники получают Points, а куратор – токены. 
- Геймификация деятельности: Quest превращает обычные действия (сходить куда-то, посетить мероприятие, попробовать сервис) в игру с задачами. Это сильно повышает вовлеченность пользователей: каждый выполненный квест дает ощущение достижения, видимые награды (Points, бейджи) и порождает контент (отчеты, фото в Space). 
- Взаимосвязь с экономикой Connect: практически каждое завершение квеста генерирует несколько экономических событий: Points участнику, Points или токены автору, NFT-бейдж участнику за достижение, реферальный бонус спонсору, если квест привлек новых людей. Quest и Connect образуют замкнутый цикл – награды мотивируют проходить новые квесты, а накопленные Points можно потратить на доступ к особым квестам или снаряжение (в будущем). 
- Ограничения: для MVP полноценная система квестов могла не быть запущена (требуется достаточное количество контента и пользователей). Вероятно, были заложены основы (модели, API) и проведены тестовые квесты. К финальному релизу сервис станет ключевым драйвером активности. Важно обеспечить защиту от читерства (например, отслеживать GPS-фальсификации), а также удобство создания квестов для PRO (что требует продуманных инструментов в интерфейсе).
Использование: 
PRO-организаторы через фронтенд Quest Asia (доступный им раздел) обращаются к Quest Service для создания/редактирования квестов: добавляют точки (выбирая места/события – Quest Service дергает Atlas/Pulse API для поиска), прописывают задания, условия и награды. 
Пользователи через клиентское приложение получают список доступных квестов (Quest Service выдает, например, GET /v1/quests?location=... – квесты поблизости или по интересам). При старте квеста – POST /v1/quests/{id}/start – сервис регистрирует участника. Далее пользователь отмечает выполнение миссий: например, сканирует QR на месте X или загружает фото – фронт отправляет на Quest API, и сервис либо проверяет автоматически (GPS координаты) либо сохраняет на модерацию PRO. После подтверждения всех шагов Quest Service завершает квест и инициирует награду (вызывает Token Service и, при необходимости, Voucher Service для выдачи приза). Token Service после этого начисляет Points/NFT, а Connect обновляет профиль пользователя (баланс, новый бейдж). Space – Quest Service может через Content Service опубликовать пост-отчет от имени пользователя (например, с галереей фотографий, собранных по квесту), либо пользователь сам делится впечатлением. RF – если квест связан с партнерами, Quest Service взаимодействует с Voucher Service, как упомянуто, а также передает партнерам итог (возможно, статистику, сколько людей пришло по квесту в их заведения – ценно для партнерской аналитики).

Referral Service – сервис реферальной программы
Назначение: Специализированный микросервис для управления рефералами – отслеживания, кто кого пригласил в платформу, и поддержки многоуровневой реферальной системы (спонсор → реферал → субрефералы и т.д.). Это часть общей экономики вовлечения (Connect), призванная стимулировать рост аудитории за счет приглашений.
Основные функции: 
- Генерация реферальных кодов/ссылок: при запросе или автоматически для каждого пользователя создается уникальный код приглашения (или персональная ссылка). Пользователь-спонсор может раздавать эту ссылку друзьям. Referral Service гарантирует уникальность кода и привязку его к определенному user_id спонсора. 
- Регистрация связей “кто кого пригласил”: когда новый пользователь регистрируется и указывает реферальный код (или заходит по приглашению), фронтенд сообщает об этом Referral Service. Сервис связывает новый аккаунт с аккаунтом пригласившего (записывает связь Sponsor → Referral). Также может строиться иерархия: если у пригласившего самого есть спонсор, формируется древовидная цепочка (для многоуровневых бонусов VIP). 
- Отслеживание ключевых событий реферала: Referral Service не начисляет награды (это делает Token Service), но мониторит события, касающиеся приглашенного пользователя – достиг ли он уровня VIP, совершил ли первые действия (например, написал первый пост, прошел квест и т.д.). Когда наступает оговоренное событие, Referral Service отправляет уведомление/событие в Token Service: “реферал пользователя X достиг события Y, начислить бонус спонсору”. Примеры: реферал получил статус VIP → спонсору +N Points; реферал впервые написал пост → спонсору небольшой бонус и т.д. - Аналитика и дерево рефералов: предоставляет API для получения структуры реферальной сети конкретного пользователя (для маркетинга и самой программы “Наставничество”). Например, запрос GET /v1/connect/referrals/tree?sponsor_id=X вернет древо: кого пригласил X, кого пригласили его рефералы и т.д. Это нужно маркетологам для выявления самых активных “реферальщиков” (наставников) и оценки вовлеченности аудитории через приглашения.
Особенности: Referral Service является частью подсистемы Connect, отвечающей за рост аудитории и вознаграждение за него. Он плотно связан с Token Service – сам не начисляет Points, но инициирует эти начисления при выполнении условий. Таким образом, вся бизнес-логика рефералов (кто и за что получает) закодирована либо в конфигурации Referral Service, либо частично в правилах Token Service. Например, Referral знает, что “достижение статуса VIP рефералом = бонус спонсору”, а Token Service по событию referral_vip уже понимает, сколько Points выдать (возможно, хранит таблицу правил). Безопасность: сервис следит за тем, чтобы один пригласительный код не использовался неправомерно (например, не позволить одному человеку создавать множество аккаунтов и быть и спонсором и рефералом). Может быть ограничение: один аккаунт можно привязать только к одному спонсору при регистрации. VIP многоуровневость: упоминается, что VIP-спейсер получает дополнительные Points за активность рефералов и суб-рефералов, значит, система может иметь 2-уровневую схему: бонусы за действия как прямых приглашенных, так и людей, которых пригласили твои приглашенные (но обычно глубина ограничена двумя уровнями для прозрачности).
Использование: Во время регистрации пользователя фронтенд (любой модуль, где происходит регистрация, чаще всего Space) отправляет Referral Service запрос с указанием кода, если он был введен. Сервис возвращает информацию о спонсоре и фиксирует связь. Token Service подписан (или ждет) на сообщения от Referral Service: при наступлении события (реферал достиг VIP, реферал совершил действие) Referral Service делает, например, POST /v1/events/ingest на Token Service с payload типа {event: "referral_levelup", sponsor: A, referral: B} – и Token Service уже начисляет Points A. Админ/маркетинг – через Connect аналитики могут запрашивать Referral Service для построения отчетов (например, топ-10 пользователей по числу приглашенных). Пользовательский интерфейс – возможно, в будущем в профиле пользователя будет показано число приглашенных друзей и заработанные за них бонусы; эти данные могут комбинироваться из Referral и Token (баланс Points от рефералов).

AI/ML (сервисы искусственного интеллекта и машинного обучения)
(На момент MVP AI/ML-сервисы, скорее всего, еще не реализованы, но их внедрение планируется по мере накопления данных и развития платформы. Ниже описаны возможные AI/ML-компоненты, которые могут быть интегрированы к финальному релизу.)

Recommendation Service – сервис персонализированных рекомендаций
Назначение: Улучшение пользовательского опыта за счет персонализации контента с помощью машинного обучения. Анализируя поведение пользователя и большие массивы данных, такой сервис будет рекомендовать ему наиболее подходящие места, события, посты или квесты, выходя за рамки простых фильтров.
Основные функции (потенциальные): 
- Персонализация ленты Space: дополнять выдачу Feed Service алгоритмически отобранными постами (например, от незнакомых авторов, но схожих по тематике, или популярные посты, которые могут заинтересовать данного пользователя). ML-модель могла бы учитывать, какие посты пользователь лайкал/читал, и предсказывать, что еще ему понравится. 
- Рекомендации мест и событий: на основе истории посещений, интересов (категорий контента, групп) и профиля пользователя выдавать рекомендации в Guru. Например, “Вам может понравиться этот ресторан поблизости (потому что вы искали кофейни)” или “Не пропустите концерт завтра, похожий на тот, что вы посетили месяц назад”. 
- Сегментация и таргетирование: классифицировать пользователей по типам (например, digital nomad, семья с детьми, ночной тусовщик) на основе их действий, и предлагать соответствующий контент: семьи видят детские мероприятия, тусовщики – вечеринки и бары и т.д. 
- Рекомендации друзей/групп: предлагать в Space потенциальных друзей (например, других русскоговорящих в том же городе) или группы по интересам для вступления, используя граф связей и общие интересы. 
- Умные уведомления: определять, какие push-уведомления будут уместны конкретному пользователю (чтобы не спамить лишним). Например, если пользователь регулярно посещает кафе, прислать уведомление о новом кафе рядом, а другому – о предстоящем концерте.
Особенности: Такой сервис требует сбора большого объема данных о поведении пользователей (просмотры, клики, посещения оффлайн через чекины, отклики на уведомления). На ранних этапах данные ограничены, поэтому на MVP, вероятно, использовались простые подходы (например, рекомендации “популярное за неделю”). С ростом аудитории можно обучать ML-модели (коллаборативная фильтрация, матричные факторизации либо нейросетевые модели рекомендаций). Он может быть реализован как отдельный сервис, который периодически вычисляет рекомендательный фид для каждого пользователя и кеширует его для выдачи по запросу.
Использование: 
Feed Service может запрашивать у Recommendation Service список дополнительных постов для пользователя X, чтобы вставить их в ленту (раздел “Рекомендовано”). 
Guru – при запросе от пользователя Recommendation Service мог бы учитывать его профиль и модифицировать сортировку (например, ставить на первые места объекты тех категорий, которые пользователь чаще просматривает). 
Notification/Email – сервис может сигнализировать Notification Service о потенциально интересных событиях (“пользователю A может понравиться мероприятие B – отправить ему уведомление”). 
Space – показывать предложения “Подпишитесь на пользователя Y, у вас 10 общих интересов” или “Вступите в группу про сёрфинг в Бали”.

Content Moderation & Analysis – автоматический анализ контента
Назначение: Поддержка модерации и классификации контента с помощью AI. Цель – разгрузить ручную модерацию и повысить качество UGC, автоматически выявляя нежелательный или нерелевантный контент, а также извлекая смысловые метки из данных.
Основные функции (потенциальные): 
- Авто-модерация изображений: использование моделей компьютерного зрения для проверки загружаемых фотографий на наличие нежелательных материалов (NSFW, насилие) или неуместного контекста. Например, если пользователь загружает фото в Space, алгоритм бы сигнализировал, если на нем обнаружена обнаженка или запрещенные символы. 
- Проверка фото для квестов: для Quest Service – анализ присланных фото-доказательств: соответствует ли фото заданию (это сложная задача, но можно начать с простого – проверка геолокации в метаданнах снимка, распознавание ключевых объектов). Например, если требовалось фото на фоне Эйфелевой башни, CV-модель может проверить наличие башни на изображении. 
- НЛП-модерация текста: классификация текстовых постов и комментариев на предмет оскорблений, спама, рекламы. Машинное обучение (или правила) может помечать сообщения с матом или подозрительными ссылками, чтобы модераторы Space быстрее реагировали. 
- Автоматическое тегирование и перевод: анализ текстов постов/статей для автоматического назначения тегов или категорий (например, выявить, что пост про “серфинг” и добавить соответствующий тег). Также возможно автоматическое предложение перевода постов между языками (например, встроить ML-перевод, чтобы англоязычные пользователи могли читать русскоязычный контент – актуально для расширения аудитории Siberia Life или англоговорящих экспатов). 
- Чат-боты и голосовые помощники: (в перспективе) создание AI-бота, к которому пользователь может задать вопрос (например, “Посоветуй ресторан с морепродуктами поблизости”) – бот бы использовал данные Atlas/Pulse и профиля, чтобы ответить. Это требовало бы NLP-понимания вопросов и генерации ответов.
Особенности: Эти AI-функции могли не входить в изначальный план MVP, но по мере роста сообщества будут более востребованы: большое количество контента потребует автоматической фильтрации, а персонализация – глубокой ML-аналитики. Внедрение AI требует и вычислительных ресурсов, и постоянной дообучаемой модели. Вероятно, часть задач (как базовая фильтрация нецензурщины) может выполняться сторонними API (например, Vision API, Perspective API) на начальном этапе.
Использование: 
Content Service при загрузке нового контента может вызывать ML-модуль модерации: например, послать изображение на анализ. Если получен высокий скор нежелательности – сразу помечать контент для ручной проверки или блокировать. 
Moderation UI – результаты AI (предположения) показываются модераторам Space/Atlas, чтобы ускорить их решение (например: “90% вероятность, что фото содержит обнаженность”). 
Feed/Recommendation – результаты анализа могут влиять на ранжирование (например, скрывать потенциальный спам). 
User interface – перевод постов: при наличии ML-перевода фронтенд Space может предложить “Перевести пост” для чужого языка.
(AI/ML сервисы в экосистеме – это будущее развитие. Они не являются строго необходимыми для запуска MVP, но их добавление к финальному релизу усилит персонализацию и автоматизацию. В данном отчете эти сервисы отмечены как запланированные, пока без реализации.)

Tokenomics (сервисы токеномики и экономики)
Token (Connect) Service – офчейн-движок экономики  
Назначение: “Расчетный центр” внутренней экономики Go2Asia. Отвечает за учет всех цифровых активов пользователей – балансы баллов Points и токенов G2A, а также за логику начисления наград по событиям. Этот сервис связывает воедино все потоки вознаграждений от разных модулей (соцсеть, партнерка, квесты и т.д.) в единую систему мотивации.
Основные функции: 
- Хранение балансов Points и G2A: ведет учет, сколько Points (внутренних баллов) и G2A токенов (внецепочных, эквивалент будущего блокчейн-токена) у каждого пользователя на счету. Это единственный источник истины для балансов – все операции проходят через него. 
- Начисление и списание Points: по заданным правилам начисляет пользователю Points за определенные действия (и может списывать за использование). Правила хранятся в конфигурации (например: новый пост = 5 Points, лайк твоего поста = 1 Point, завершение квеста = 100 Points и т.д.). Сервис получает события (event) от разных сервисов и при получении соответствующего события создает транзакцию на баланс. Гарантируется идемпотентность – повторно одно и то же событие не приведет к двойному начислению. 
- Учет G2A (оффчейн): хотя “настоящие” G2A – это блокчейн-токены TON, Token Service ведет внутренний зеркальный баланс G2A для пользователя. Например, если пользователь конвертировал Points в 10 G2A, сервис отразит +10 G2A на его оффчейн счете. При выводе на блокчейн – списывает их (подробнее см. Gateway). 
- Управление NFT-бейджами (оффчейн): хранит информацию о полученных пользователем NFT-бейджах (достижениях) на платформе. Каждый бейдж имеет уровень, состояние (получен/улучшен), возможно и оффчейн ID. Token Service знает, какие бейджи у кого есть и может обновлять их (например, повысить уровень существующего бейджа). 
- Таблица правил наград: содержит настроенные правила конверсии событий в награды. Например: quest_completed → +100 Points, content_featured (пост попал в блог) → +50 Points и бейдж “Автор месяца”, referral_sign_up → +10 Points и т.д. Когда приходит событие, сервис смотрит правила и формирует одну или несколько транзакций/записей: начислить X Points пользователю A, выдать бейдж B пользователю A, начислить Y токенов пользователю C (спонсору) и т.п. 
- Запрос операций на блокчейн: когда нужно фактически выдать настоящие G2A токены или NFT на блокчейне, Token Service формирует задачу и обращается к Blockchain Gateway (см. ниже). Например, пользователь запросил вывод 100 G2A – Token Service проверяет его баланс Points (или G2A off-chain), списывает соответствующее количество Points, создаёт задачу mint 100 G2A на кошелек пользователя и отправляет Gateway-команде на исполнение. 
- Аудит и безопасность транзакций: присваивает каждой операции уникальный idempotency_key для отслеживания, пишет в логи подробные записи (кто, за что получил), чтобы можно было проверять корректность. Не взаимодействует напрямую с внешним миром, все внешние операции – через Gateway, что снижает риски (отсутствие прямой работы с приватными ключами и криптооперациями внутри).
Особенности: 
Off-chain модель: Token Service выполняет все расчеты вне блокчейна, что позволяет системе работать быстро и без комиссий. Points и большинство NFT существуют только в базе, а on-chain включается только по необходимости (конверсия G2A или выпуск редких NFT). Такой двухконтурный подход (оффчейн Points/NFT ↔ ончейн G2A/особые NFT) обеспечивает баланс между скоростью и открытостью. 
Интеграция со всеми модулями: практически каждый сервис посылает события в Token Service: пост опубликован, лайк получен, квест пройден, ваучер использован, партнер присоединился – всё это конвертируется в экономические награды. 
Сердце Connect: на клиентской стороне Connect Asia – это скорее концепция (отображение общего баланса, наград и т.д.), а на бэкенде Connect реализован через Token Service (+подсервисы) и шлюз к блокчейну.
Ограничения: на MVP могли быть реализованы только базовые начисления (например, за регистрацию и простейшие действия) и отображение баланса Points. Полный же функционал Connect (сложные правила, конверсия Points↔G2A, NFT) вероятно планируется ближе к публичному запуску токена. Внедрение требует тщательного тестирования, чтобы исключить эксплойты (например, накрутку Points) и выверить экономическую модель.
Использование: 
Все сервисы отправляют в Token Service события через внутренние вызовы или шину. Например: Space сообщает “user X создал контент” – Token Service начисляет Points за активность; Blog – “статья Y опубликована, автор Z” – начислить автору Points и выдать бейдж, т.к. событие content_featured; RF – “PRO привлек партнера Q” – событие для выдачи G2A токенов куратору; Quest – “quest_completed” – Points/NFT участнику и Points PRO-автору; Voucher/RF – “voucher_used” – возможно, Points посетителю и куратору за вовлечение; Rielt – “rent_success” – (гипотетически) Points арендаторам и бонус посреднику PRO.
 Blockchain Gateway – Token Service формирует запросы при конверсиях (mint/burn/transfer токенов) и при необходимости выпуска NFT на цепи. 
Connect frontend – обращается к Token Service (и/или Points/NFT Service – см. ниже) для отображения баланса Points, списка достижений, истории транзакций. Например, GET /v1/connect/balance?user_id=X возвращает: Points = 1500, G2A off-chain = 50, NFT: [Badge1, Badge2]. 
Админка – админы через Token Service могут делать корректировки, просматривать агрегированные метрики экономики (сколько Points в системе, сколько токенов приготовлено к выпуску и т.д.).

Points Service – сервис баллов
Назначение: Узкоспециализированный компонент, выделенный из Token Service для работы с частыми микротранзакциями баллов Points. Он ускоряет и масштабирует начисление множества мелких наград (лайки, ежедневная активность и др.), разгружая основной Token Service.
Основные функции: - Обработка массовых начислений Points: получать события об активностях, требующих начисления Points, и мгновенно обновлять баланс. Например, каждый лайк поста = +1 Point автору – при сотнях лайков в минуту Points Service справляется с таким потоком, не блокируя общий токен-сервис. 
- Хранение транзакций по Points: свой (вероятно, высокопроизводительный, in-memory или специализированный) хранилище операций с баллами. Обеспечение мгновенной консистентности: пользователю сразу отражается новый баланс после действия. 
- Бизнес-правила Points: возможно, часть логики (правила начислений) сконцентрирована здесь для быстроты. Однако, скорее, он действует по командам Token Service (который посылает ему “начислить X Points user Y”). 
- Обмен данными с Token Service: Points Service синхронизируется с Token Service – последний воспринимает его как подсистему. Например, при выдаче Points Points Service записывает транзакцию, а Token Service может копировать/суммировать результат для общего отображения.
Особенности: Points Service логически может рассматриваться как часть Token Service, но выделен архитектурно для масштабирования. Это позволяет независимо масштабировать поток транзакций Points (которых на порядке больше, чем операций с токенами). Он тесно увязан с NFT Service – т.к. награды Points часто сопряжены с достижениями: например, “набрал 1000 Points – получить NFT бейдж”. Механизм может быть такой: Points Service сообщает NFT Service при достижении порога или NFT Service периодически проверяет суммарные Points.
Использование: 
Token Service перенаправляет часть событий или делегирует Points Service выполнение начислений. Например, событие like_received – Token Service регистрирует его и отдаёт Points Service задачу +1 Point автору. 
Connect UI – чаще обращается к Token Service для сводных данных, но может и напрямую к Points Service, если нужно, скажем, вывести детальную историю начислений баллов. 
NFT Service – взаимодействует, как указано, для отслеживания прогресса, завязанного на количество Points.
(Points Service и NFT Service существуют, скорее, на уровне проектирования архитектуры. Они планируются к реализации, когда нагрузка возрастет. На MVP, вероятно, их функциональность выполняется непосредственно Token Service как монолит, а позже, для финальной версии, будет вынесена в отдельные микросервисы.)

NFT Service – сервис NFT-бейджей
Назначение: Управление системой невзаимозаменяемых токенов (NFT), которые используются как бейджи достижений и элементы репутации пользователей. Он отвечает за определение условий получения NFT, выдачу их в оффчейн-учете и взаимодействие с блокчейном для настоящих NFT.
Основные функции: 
- Каталог достижений: хранит перечень всех возможных NFT-бейджей и условия их получения. Например: “Explorer I” – пройдено 1 квест, “Explorer II” – пройдено 5 квестов, “Influencer” – набрано 100 лайков на посте и т.д. Для каждого прописано условие (в терминах событий/показателей) и, возможно, визуальный дизайн (иконка, описание). 
- Выдача оффчейн NFT: при наступлении условий NFT Service фиксирует, что пользователь достиг достижения, и записывает у себя выдачу бейджа. Например, когда Points Service сообщает, что пользователь выполнил 5 квестов, NFT Service добавляет пользователю NFT “Jungle Explorer” (оффчейн). Эти оффчейн-NFT хранятся в базе (с уникальным ID, привязкой к user_id). 
- Повышение уровня NFT: некоторые бейджи улучшаются при дальнейших достижениях (например, “Уровень 2” того же бейджа). Сервис отслеживает прогресс и обновляет запись (либо заменяет NFT Level1 на Level2, либо добавляет новый NFT). 
- Ончейн интеграция: когда требуется, NFT Service инициирует выпуск NFT-токена на блокчейне TON через Gateway. Например, если определенный бейдж считается редким и ценным, или по запросу пользователя (может быть механика: “монетизируй свой бейдж на блокчейне”). Сервис вызывает Blockchain Gateway для mint NFT с нужными параметрами. Gateway возвращает transaction_id, а NFT Service обновляет статус бейджа как “закреплен on-chain”. 
- Учёт и отображение: по запросу Connect UI или профиля пользователя NFT Service (через Token Service) выдает список всех бейджей пользователя, с указанием уровней, значков, описаний.
Особенности: 
Отделение от Token Service – архитектурно сделано, чтобы сконцентрировать всю логику наград и метаданных NFT отдельно от финансовых расчетов Points. Это повышает безопасность (Token Service – про числа, NFT Service – про имиджи и логику достижений) и гибкость. 
Связь с Points/Quest: тесно взаимодействует: событие quest_completed обычно приводит и к Points, и к NFT – сначала Points Service начисляет Points, затем NFT Service проверяет условие “если это 5-й квест -> выдать бейдж”. 
On-chain – важны решения, какие NFT выводить в блокчейн. Вероятно, редкие достижения (например, “Привлек 50 партнеров”) могут даваться как NFT в TON (что пользователь сможет показать вне платформы). 
Мотивация: наличие NFT-бейджей – часть репутации. Пользователи будут стараться собрать их (геймификация), а некоторые NFT могут давать дополнительные бонусы (например, VIP-спейсер с определенным NFT может получить доступ к эксклюзивным квестам).
Использование: 
Token/Points Service отправляет триггеры или дает доступ NFT Service к событиям. Либо NFT Service сам “подписан” на поток событий Token Service. Например: “user X достиг 1000 Points” – NFT Service ловит это и выдает бейдж “Level 1” (условно). 
Quest Service напрямую может сообщать NFT Service: “user X завершил 10 квестов” – тоже триггер на выдачу определенного NFT. 
Blockchain Gateway – NFT Service вызывает его API (например, /v1/nft/mint) с параметрами пользователя и идентификатора бейджа, Gateway выполняет транзакцию и возвращает подтверждение. 
Connect/Space UI – при загрузке профиля пользователя, фронтенд делает запрос, объединяющий данные из User Service (имя, аватар) и Connect (Points, NFT). NFT Service предоставляет список бейджей, которые фронт отображает, например, иконками на профиле PRO или в разделе достижений.

Blockchain Gateway Service – шлюз блокчейн-операций
Назначение: Критичный инфраструктурный микросервис, обеспечивающий безопасное взаимодействие платформы с внешней блокчейн-сетью TON. Выполняет роль моста on-chain/off-chain: по запросам внутренней токеномики совершает транзакции в блокчейне (выпуск и перевод токенов G2A, выпуск/апгрейд NFT), а также отслеживает их статус.
Основные функции: 
- Выполнение транзакций G2A токена: по команде Token Service производит: - Mint (выпуск) G2A на заданный адрес (например, внутренний кошелек пользователя или внешний, если он привязал свой TON-адрес). - Burn (сжигание) G2A – например, когда пользователь возвращает токены на платформу (конверсия обратно в Points). - Transfer G2A – перевод с внутреннего кастодиального счета на внешний кошелек пользователя (при выводе). 
- Выпуск и изменение NFT: - Mint NFT: запись NFT-бейджа в блокчейне TON, привязанного к пользователю (может быть коллекция платформы с уникальными токенами). Выполняется, когда Token/NFT Service решит вынести награду on-chain (например, особый бейдж за достижение). - Upgrade NFT: возможна операция обновления NFT в блокчейне (напр., повышение уровня бейджа изменением его метаданных). Если TON не поддерживает апгрейд прямо, может реализовываться как выпуск новой версии NFT и сожжение старой. 
- Отслеживание транзакций: после инициирования транзакции Gateway ждет подтверждения в сети TON (прослушивает состояние). Только убедившись, что блокчейн зафиксировал операцию, возвращает результат Token Service и записывает хеш/идентификатор транзакции для аудита. 
- Управление ключами: хранит приватные ключи кошельков, с которых совершаются транзакции (например, ключ платформенного минтера G2A, или ключи кастодиальных кошельков пользователей, если те хранят токены на платформе). Ключи хранятся в безопасном хранилище (HSM или специализированный модуль), исключая несанкционированный доступ. Gateway сам подписывает транзакции этим ключом, не раскрывая ключи наружу. 
- Безопасность и контроль: допускает вызовы только от внутренних сервисов (белый список IP, mTLS соединения), никакой публичный доступ. Реализует механизмы защиты: лимиты на вывод (например, не более N токенов в месяц одному пользователю), velocity checks (ограничение частоты транзакций, чтобы предотвратить выведение средств украденного аккаунта), возможна интеграция с AML/KYT сервисами для проверки адресов на чистоту (если токен будет торговаться на внешних рынках).
Особенности: 
Связка “мозг-руки” с Token Service: Token Service принимает бизнес-решение (сколько и кому), а Gateway «руками» исполняет его в сети. Такое разделение критически важно для безопасности: Token Service не хранит ключей и не знает деталей блокчейна, а Gateway не имеет бизнес-контекста (не может самовольно что-то начислить, он только выполняет конкретные запросы). 
Только TON: заточен на сеть TON, где выпущен токен G2A. Возможно, содержит логику взаимодействия с Ton SDK, управление wallet-смарт-контрактами, и т.д. 
Прозрачность для пользователя: все on-chain операции запускаются из обычного интерфейса Connect (напрямую пользователь блокчейн не трогает), Gateway делает их “за кадром” – но пользователь может привязать внешний кошелек, тогда Gateway валидирует его подпись перед отправкой на него токенов.
Ограничения: внедрение блокчейн-шлюза на MVP обычно не требуется, если токеномика ещё не запущена ончейн. Скорее всего, Gateway Service реализуют ближе к моменту выпуска реального токена G2A и NFT (финальный релиз). Его разработка требует глубокого опыта в блокчейн TON, поэтому возможно изначально привлекается сторонний решение или экспертиза.
Использование: 
Token Service обращается к Gateway по защищенному каналу. Например, вызов POST /v1/g2a/mint с параметрами (task_id, user_id, amount) – Gateway подписывает и отправляет транзакцию Mint G2A, затем по завершении зовет callback или делает доступным статус. Аналогично POST /v1/g2a/transfer (перевод на адрес), POST /v1/g2a/burn (сжигание). Для NFT: POST /v1/nft/mint и POST /v1/nft/upgrade для выпуска и обновления NFT-бейджа. 
User Service/Connect – возможно, косвенно участвуют: привязка внешнего кошелька (POST /v1/wallets/link – пользователь присылает свой TON-адрес и подпись, Gateway проверяет и сохраняет привязку). 
Админ – может запрашивать Gateway для просмотра служебной информации (баланс системы, статусы узлов). Но в целом Gateway – сервис без прямого пользовательского API, он полностью в фоне.
(Токеномика – одна из ключевых отличительных черт платформы Go2Asia, хотя на стартовом этапе она могла быть частично “на бумаге”. В MVP, вероятно, внедрены базовые Points оффчейн (например, счетчик очков), а к финалу планируется полный цикл: Points → G2A token → NFT. Token Service (Connect) – реализован частично, Points/NFT/Gateway – запланированы. Эти компоненты будут введены в строй по мере готовности юридической и технической базы для выпуска токена.)

Technical (технические сервисы и компоненты)
(Эти сервисы обеспечивают инфраструктуру, коммуникации и вспомогательные функции платформы.)
Notification Service – сервис уведомлений
Назначение: Отвечает за отправку пользователям уведомлений – как push-уведомлений в мобильном/веб приложении, так и email-рассылок (например, подтверждение регистрации, восстановление пароля). Обеспечивает, чтобы пользователи своевременно получали важные сообщения о событиях на платформе.
Основные функции: 
- Push-уведомления: прием запросов от других сервисов на отправку push (через мобильные уведомления или веб-push). Например, Guru Service желает уведомить “рядом с вами новое место открыто” – Notification Service формирует push соответствующего пользователя. Реализация может основываться на внешних пуш-сервисах (Firebase Cloud Messaging для Android/веб, APNs для iOS). 
- Email-уведомления: отправка писем пользователям. В первую очередь, системные: подтверждение адреса при регистрации, письмо для сброса пароля. Также, возможно, новостные дайджесты или персональные подборки (в дальнейшем). 
- Шаблоны и локализация: хранение шаблонов уведомлений (текст, тема письма) на разных языках, подстановка переменных (например, имя пользователя, название места). Это позволяет отправлять уведомления, учитывая языковые предпочтения из профиля пользователя. 
- Учет предпочтений: уважает настройки пользователя – в профиле может быть указано, какие уведомления он хочет получать (например, включены ли push о новых местах, или только от друзей). Notification Service хранит эти настройки и фильтрует события. 
- Очередь и ретраи: для надежности, удерживает сообщения в очереди (если устройство офлайн или email-сервер временно недоступен, попробует повторно). Масштабируется для массовых рассылок.
Особенности: Notification Service не упоминался явно в архитектурном обзоре, но push-уведомления уже фигурируют как реализованные функции (например, уведомление о новом кафе поблизости). Вероятно, MVP включает простой механизм пушей: Guru Service напрямую через Firebase отправляет уведомление. Однако, по мере усложнения, лучше централизовать. 
Интеграция: 
- Guru: основной генератор гео-уведомлений (“новое событие/место рядом” – раз в день, например). 
- Space: нотификации о социальных взаимодействиях – “вам написали сообщение”, “ваш пост прокомментировали”, “новый участник в вашей группе” – всё это обрабатывается либо самим Space бэкендом, либо через Notification Service. 
- Connect: уведомления о достижениях – “вам начислено 100 Points”, “вы получили новый бейдж” – Token Service/Connect может отправлять через Notification Service. 
- Email: User Service при регистрации вызывает Notification (email) для отправки ссылки подтверждения. При сбросе пароля – аналогично.
Ограничения: сложность в том, чтобы не перегружать пользователя уведомлениями. Нужны тонкие настройки (может, AI-рассыльщик в будущем). Сейчас, вероятно, просто ограниченное число типов уведомлений. Email-кампании (типа дайджест раз в неделю) – могут быть введены позже, когда контента много.
Использование: Разные сервисы вызывают Notification API. Например: POST /v1/notify/push с телом {user: X, title: "...", text: "..."} – Notification Service проверяет устройство/токен push пользователя X и шлет через провайдер. User Service вызывает send_email(user_email, template=welcome) при регистрации. Space – при событии “комментарий к посту”, Space Service дергает notify(user=автор, type=comment, data=...) – уведомление автору поста. Monitoring – Notification Service может собирать статистику доставок, ошибок, показателей (CTR push-уведомлений) для дальнейшей оптимизации.

Logging & Analytics Service – сервис логирования и аналитики
(Вместо отдельного сервиса, возможно, это совокупность инструментов, но опишем как компонент архитектуры.)
Назначение: Сбор централизованных логов, метрик и трассировок от всех микросервисов для мониторинга, отладки и анализа работы системы.
Основные функции: 
- Централизованный логинг: все микросервисы отправляют структурированные логи (JSON) в единый лог-хранилище (например, ELK stack – ElasticSearch/Logstash/Kibana). Это позволяет инженерам видеть связную картину – например, поток запросов через несколько сервисов (по correlation-id). 
- Distributed Tracing: внедрение корреляционного идентификатора в каждый запрос, проходящий через сервисы, и сбор трассы запросов (с таймингами). Использование инструментов типа Jaeger: каждый сервис помечает входящие/исходящие запросы ID и отправляет спаны в Jaeger. Это упрощает отладку производительности и узких мест. 
- Метрики и алертинг: сбор метрик (через Prometheus, Graphite и т.п.) – количество активных пользователей, время ответа сервисов, количество ошибок, и бизнес-метрик (сколько Points начислено сегодня). Настройка алертов: например, если доступность сервиса < 99% или очередь сообщений растет – DevOps получает уведомление. 
- Аналитика использования: возможно, отдельный контур: сбор обезличенных данных о действиях пользователей для команды анализа (какие функции популярны, воронка онбординга и т.д.). Это может включать события фронтенда и бэкенда.
Особенности: Такой сервис/система обычно внедряется с самого начала разработки, чтобы поддерживать надежность. В тексте указывалось, что реализованы трассировки запросов и метрики по всем сервисам, с выводом через Jaeger и метриками. Безопасность данных учитывается: персональные данные в логи не пишутся, correlation-id не раскрывает информацию о пользователе, только ID запроса.
Использование: Все сервисы подключены к системе логирования через общее middleware. Например, при старте запроса в Guru генерируется correlation-id, он передается дальше в Atlas, Rielt и т.д. – в логах можно найти связку записей по этому ID. DevOps и разработчики используют веб-интерфейсы Kibana/Grafana/Jaeger для просмотра логов и метрик в режиме реального времени. Админы могут получать агрегированные отчеты (например, сколько ваучеров использовано – по логам Voucher Service, сколько регистраций – по логам User Service). Эта инфраструктура – скрытая от пользователей, но жизненно важна для поддержания платформы.
(Прочие технические аспекты: безопасное взаимодействие сервисов обеспечено mTLS-шифрованием и ролевым контролем доступа между сервисами (каждый сервис имеет свою роль и не может вызывать критичные методы чужих сервисов без прав). Масштабируемость достигается контейнеризацией и оркестрацией: каждый микросервис разворачивается в нескольких экземплярах (поддержка auto-scaling), настроен автоматический перезапуск при сбоях, gracefull degradation на случай отказов компонентов. Все это вместе делает бэкенд-платформу надежной и готовой к росту.)

Взаимодействие между микросервисами
Несмотря на разделение функциональности по отдельным сервисам, все они образуют тесно интегрированную экосистему, где модули взаимозависимы и обмениваются данными для достижения цельного пользовательского опыта. Ниже перечислены основные прямые связи (API-вызовы и события) между сервисами Go2Asia:
•	Guru ← Content/Partner сервисы: Guru Service агрегирует данные практически от всех других бэкендов для выдачи “рядом” объектов. Он делает параллельные запросы к Atlas (места, включая RF-партнеров), Pulse (события), Rielt (жилье), Space (пользователи PRO поблизости) и Blog (новости). То есть Guru зависит от актуальности данных этих сервисов, а взамен генерирует для них трафик – пользователь, увидев объект в Guru, переходит в соответствующий модуль для деталей.
•	Atlas ↔ все: Atlas Service служит базой для геоданных, поэтому многие сервисы обращаются к нему. Pulse при привязке события сохраняет ссылку на place_id из Atlas. Rielt при сохранении объявления запрашивает Atlas для идентификации города/района по адресу. Blog привязывает статьи к городам/местам Atlas. В обратную сторону – Atlas получает “живой” контекст от других: рейтинг места формируется по отзывам из Space/RF, наличие партнерского статуса – по данным RF (флаг rf_badge). Таким образом, Atlas и остальные контент-сервисы поддерживают двунаправленную связь: Atlas дает справочные данные, а они дополняют его пользовательской информацией.
•	Pulse → Guru/Blog/Connect: Контент событий, генерируемый Pulse Service, потребляется в нескольких местах. Guru показывает ближайшие актуальные события (API Pulse для Guru). Blog берет материалы из Pulse – прошедшие яркие события используются для статей и хроники (возможно, редакторы мониторят ленту событий). Connect учитывает активность организаторов событий: если PRO активно создает популярные события, Token Service начисляет ему Points или бейджи. Кроме того, статистика Pulse (посещаемость мероприятий) может собираться для аналитики турпотока, ценной и партнерам, и для контент-планирования Atlas/Blog.
•	Blog ↔ Space: Между медиасервисом Blog и соцсетью Space существует двунаправленная интеграция. Space Asia является источником UGC-контента для блога: лучшие посты пользователей (выбранные по лайкам и модерацией) публикуются в Blog Asia. Обратно, каждый пост в блоге вызывает отклик в соцсети – пользователи обсуждают статью в Space (через комментарии или создавая собственные посты-впечатления), подписываются на авторов-PRO после прочтения, вдохновляются делать свой контент. Blog выступает витриной и “официальным” медиа, а Space – питательной средой и каналом распространения: такая связка усиливает сообщество, мотивируя пользователей, т.к. их вклад может получить видимость на высоком уровне. Технически это реализовано тем, что Blog Service при публикации статьи дергает Content/Feed Service Space для анонса, а модераторы Blog имеют доступ к Space для отбора постов.
•	Space ↔ RF: Социальный модуль и партнерская программа пересекаются через механизм отзывов и коммуникации с бизнесом. После посещения партнерского места (с ваучером или просто отмеченного RF) пользователь оставляет отзыв-пост в Space (возможно, со специальной формой на странице места или просто отмечает место/хэштег). Эти данные поступают в RF Service: отзыв отображается в профиле партнера, влияя на рейтинг места. Также Space служит площадкой общения: PRO-кураторы могут в комментариях или группах обсуждать с пользователями партнерские услуги, собирать обратную связь о качестве сервиса. Более того, функциональность “люди рядом” в Space может показывать поблизости PRO-кураторов, закрепленных за ближайшими RF-локациями – чтобы новички могли напрямую обратиться к эксперту за советом. Таким образом, социальное взаимодействие обогащает партнерский каталог, а бизнес-контент дает участникам Space новую тему для общения и совместной пользы.
•	RF ↔ Quest: Контент партнерской сети активно вовлечен в геймификацию. Многие квесты строятся вокруг посещения RF-локаций и использования их предложений. Например, квест “Гастротур” объединяет несколько ресторанов-партнеров: PRO-организатор включает их как точки, и участники должны посетить каждое (получив по ходу ваучер на фирменное блюдо). Quest Service при этом обращается к RF/Atlas, чтобы валидировать точки, а также резервирует выдачу ваучеров через Voucher Service. Взаимная польза: партнеры получают новых посетителей (привлеченных игрой), пользователи – скидки и награды, PRO – токеномические бонусы за вовлечение аудитории. Эта интеграция вовлекает локальный бизнес в игровой формат продвижения, расширяя охват акций RF.
•	Quest ↔ Connect: Quest Asia является крупным генератором событий для экономики Connect. Почти каждый завершенный квест инициирует серию вознаграждений:
•	участнику начисляются Points и, возможно, NFT-бейдж,
•	автору-PRO начисляются Points или G2A токены (за вклад в контент),
•	может выдаваться реферальный бонус (если участника пригласил кто-то) – то есть даже Referral Service получает сигнал,
•	если квест коммерческий (с партнерами), PRO-куратор получает комиссионный токен за привод клиентов партнеру. Все эти начисления проходят через Token Service (Connect), куда Quest Service шлет соответствующие события. Обратно, система Connect стимулирует квестовую активность: накопив Points, пользователь может “покупать” доступ к особым квестам или улучшения экипировки (гипотетически) – то есть тратить свои баллы на игру. Наличие редких NFT-бейджей может давать привилегии в квестах (например, открывать эксклюзивные миссии). Таким образом, геймификация и экономика образуют замкнутый цикл взаимного усиления.
•	Connect ← все: Подсистема Connect (Token Service и смежные) получает сигналы практически от всех модулей платформы. Примеры событий и их источники:
•	Space: content_created (новый пост) → Points автору за активность.
•	Blog: content_featured (пост попал в блог) → Points и бейдж автору за вклад.
•	RF: partner_joined (PRO привлек нового партнера) → G2A токены этому PRO-куратору за развитие сети.
•	Quest: quest_completed → Points и NFT участнику, Points автору (и возможно рефералу бонус).
•	RF: voucher_used (пользователь воспользовался ваучером у партнера) → событие от RF Service → Points пользователю (за активность), Points PRO (за помощь партнеру).
•	Rielt: rent_completed (успешная аренда, гипотетически) → Token Service начислил бы Points арендатору и владельцу, а PRO-посреднику токены (если модель это предусматривает). Эти события поступают либо напрямую в Token Service (REST вызов типа /v1/events/ingest), либо через брокер сообщений. Token Service обрабатывает их и изменяет балансы, выдавая награды. Без таких входящих сигналов Connect не имеет смысла – он реагирующая система, скрепляющая экономикой все действия пользователей.
•	Token Service ↔ Blockchain Gateway: Для реализации ончейн-токеномики внутренняя экономика плотно связана с шлюзом к блокчейну TON. Когда на уровне Connect возникает необходимость выполнить операцию в сети (например, пользователь конвертирует Points в G2A токены), Token Service вызывает API Gateway с задачей: mint указанное количество G2A на кошелек пользователя. Gateway выполняет транзакцию в блокчейне и возвращает подтверждение, после чего Token Service обновляет оффчейн баланс, уменьшая Points и фиксируя, что соответствующее число G2A перешло в ончейн. Аналогично для NFT: Token Service (или NFT Service) при необходимости вызывает mint NFT через Gateway. Эти два сервиса работают как “мозг и руки”: Token Service – мозг (решает, что и сколько перевести), Gateway – руки (фактически подписывает и осуществляет транзакцию). Благодаря этому разделению у каждого своя ответственность и повышена безопасность – ни один в отдельности не обладает полной властью над активами.
В целом, микросервисная архитектура Go2Asia обеспечивает гибкую и масштабируемую интеграцию всех этих компонентов. Контентный слой (Atlas, Pulse, Blog) дает знания и события. Социальный слой (Space, Guru) соединяет людей и обеспечивает навигацию и общение. Партнерский слой (RF, Rielt) встраивает бизнес-сервисы и коммерцию. Игровой слой (Quest, связанные механики) стимулирует активность и вовлечение. Инфраструктурный слой (Token/Points/NFT Service, Gateway) отвечает за экономику и безопасность операций. Все части обмениваются данными и событиями, образуя единый организм. Для пользователя все эти взаимодействия скрыты – он видит цельный продукт, где, например, выполнив действие в одном модуле, получает награду в другом, или из карты переходит в статью, из статьи – в соцсеть, и так далее, без разрывов. Именно такая связность модулей делает платформу Go2Asia (и ее аналог Siberia Life) уникальной цифровой экосистемой, готовой обеспечить пользователю богатый функционал в рамках одной объединенной среды.

 
Дополнения
Notification Service
Notification Service — централизованный микросервис для отправки уведомлений пользователям через email, push (OneSignal), Telegram (в фазе 2) и другие каналы.
Теперь, с обновлённой моделью реакций и асинхронного общения, Notification Service является ключевым транспортным слоем коммуникации между пользователями.
Основные задачи
•	Подписка на события Event Bus:
o	reaction.created — новый лайк, отзыв, репост, вопрос, запрос контакта, ответ в ветке.
o	thread.reply.created — ответ в треде общения.
o	quest.completed, post.published, space.followed и др.
•	Формирование уведомлений по шаблонам:
o	push,
o	email (через Postbox/Mailgun),
o	Telegram Bot API (Фаза 2),
o	внутренняя “уведомительная лента” в Space Asia (опционально).
•	Логирование всех уведомлений:
o	статус доставки,
o	канал,
o	время открытия.
•	Управление предпочтениями пользователя (Фаза 2):
o	включить/выключить типы уведомлений,
o	выбрать канал.
API
•	POST /api/notifications/test — техническое тестовое уведомление.
•	GET /api/notifications/user/:id — список уведомлений пользователя.
•	(Фаза 2) PATCH /api/notifications/preferences — управление настройками.
Интеграции
•	Reactions Service — основной источник событий.
•	Thread/Inquiry Model — отправка “новый ответ/новый вопрос”.
•	Connect Service — уведомления о наградах, уровнях, Points.
•	Space Service — уведомления о репостах, подписках, упоминаниях.
•	Guru / Atlas / Pulse — уведомления о событиях, публикациях, активности друзей.
Роль сервиса
Notification Service фактически заменяет собой реальный чат в Go2Asia в сценариях, где пользователю нужно:
•	получить ответ на вопрос,
•	узнать о новом отзыве,
•	увидеть реакцию на что-то,
•	отследить полудиалог в ветке общения,
•	получить от автора события/квеста важную информацию.
________________________________________
🎉 Краткое резюме для документации
•	Go2Asia использует структурированную модель общения, основанную на реакциях, репостах и асинхронных ветках общения.
•	Нет классических комментариев и real-time чатов.
•	Reactions Service — ядро социального взаимодействия.
•	Thread/Inquiry Model — лёгкий заменитель чата для сценариев “вопрос ↔ ответ”.
•	Notification Service — транспорт коммуникации между пользователями.

