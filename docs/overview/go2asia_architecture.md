Архитектура цифровой экосистемы Go2Asia

Документ описывает целостную архитектурную модель платформы Go2Asia: принципы построения системы, модульность, взаимодействие фронтенда и бэкенда, структуру микросервисов, шаблоны интеграций, токеномику, коммуникационную модель, наблюдаемость и принципы масштабирования.
Это один из ключевых контекстных документов для мультиагентной разработки (Cursor, ML-агенты).
________________________________________
1. Архитектурные принципы
Архитектура Go2Asia строится на следующих концепциях:
1.1. Модульность
Каждый домен (Atlas, Pulse, Quest, RF, Rielt) — отдельный FE-модуль и отдельный микросервис.
1.2. Микрофронтенды в PWA Shell
FE разделён на независимые модули, которые:
•	подгружаются динамически,
•	имеют собственные маршруты,
•	используют единый UI-kit и дизайн-систему,
•	работают внутри общего PWA-контейнера.
1.3. Микросервисная архитектура
BE разделён на десятки микросервисов по доменам.
Каждый:
•	имеет собственную модель данных,
•	предоставляет публичный API,
•	публикует события,
•	не владеет чужими данными,
•	масштабируется независимо.
1.4. Event-Driven Architecture
Go2Asia — event-centric платформа: большинство бизнес-процессов активируются событиями.
Примеры:
•	quest.completed
•	voucher.purchased
•	referral.joined
•	reaction.created
•	rf.review.added
•	rielt.contact_request
•	rf.premium_voucher.bought
Сервис Connect является центральным обработчиком событий экономики.
1.5. API-First
Все клиентские модули работают через HTTP/JSON API.
В будущем — gRPC для внутренних вызовов.
1.6. Двухконтурная экономика
•	Points Service — soft off-chain.
•	NFT Service — достижения и уровни.
•	G2A Token — on-chain через TON.
•	Blockchain Gateway — единственная точка доступа к TON.
1.7. Reaction-Based Communication
Вместо чатов — reactions + threads.
Упрощает разработку, юр. риски, модерацию.
1.8. AI-Oriented Architecture
Платформа проектируется с учётом:
•	AI-ассистента для пользователей,
•	AI-data layer,
•	мультиагентной разработки,
•	автоматических контент-генераторов,
•	гео-рекомендательных моделей.
________________________________________
2. Общая архитектурная схема
                   ┌───────────────────┐
                   │     PWA Shell     │
                   │   (Next.js 15)    │
                   └────────┬──────────┘
                            │
        ┌───────────────────┼─────────────────────┐
        │                   │                     │
 ┌──────▼───────┐   ┌───────▼────────┐   ┌────────▼────────┐
 │  FE Modules  │   │ Shared UI Kit  │   │  Authentication  │
 │ (Atlas etc.) │   │   Design Sys   │   │  Clerk/Auth SRV  │
 └──────────────┘   └────────────────┘   └──────────────────┘

                 ┌────────── Back-End ───────────┐
                 │                                 │
      ┌──────────▼─────────┐             ┌────────▼────────┐
      │ Domain Microservices│             │ Integration Layer│
      │ Atlas/Pulse/...     │             │  API Gateway     │
      └──────────┬─────────┘             └────────┬─────────┘
                 │                                 │
                 ▼                                 ▼
       ┌────────────────┐               ┌────────────────────────┐
       │ Event Bus (EB) │──────────────▶│ Connect (Economy Core)│
       └────────────────┘               └─────────┬──────────────┘
                                                  │
             ┌────────────────────────────┬───────┼─────────────────────┐
             ▼                            ▼                             ▼
   ┌────────────────┐         ┌──────────────────┐           ┌────────────────────┐
   │ Points Service │         │   NFT Service    │           │ Blockchain Gateway │
   └────────────────┘         └──────────────────┘           └────────────────────┘

________________________________________
3. Frontend Architecture
3.1. PWA Shell
Основа клиентской части, написанная на Next.js 15 (App Router):
•	маршруты верхнего уровня,
•	загрузка микрофронтендов,
•	общие layout-компоненты,
•	AppBar, TabBar,
•	аутентификация,
•	deep-links,
•	offline-слои.
3.2. FE Modules (Microfrontends)
Каждый модуль — независимая капсула:
•	Atlas — страницы стран, городов, мест.
•	Pulse — страницы событий.
•	RF — бизнес-партнёры, ваучеры.
•	Quest — квесты, прохождения.
•	Rielt — жилые объекты.
•	Guru — главный «центр рядом».
•	Blog — статьи.
•	Space — лента, профиль, репосты.
•	Connect — баланс и награды
Модули используют:
•	общий UI-kit (@go2asia/ui),
•	общий Storybook,
•	общие дизайн-токены.
3.3. FE → BE взаимодействие
Только через API Gateway или прямые сервисные эндпоинты.
Особенность:
•	Space делает запросы к Content, Reactions, Guru.
•	Guru агрегирует сразу несколько сервисов.
•	Connect напрямую не вызывается FE (только события → начисления).
________________________________________
4. Backend Architecture
4.1. Микросервисная модель
Каждый домен — отдельный сервис:
Контент и данные
•	Atlas Service
•	Pulse Service
•	Media (Blog) Service
•	Guru Service
Социальный слой
•	Content Service (посты)
•	Reactions Service (лайки, репосты, отзывы, threads)
•	Notification Service
Партнёрские домены
•	RF Service
•	Voucher Service
•	Rielt Service
Геймификация
•	Quest Service
Экономика
•	Connect Service
•	Points Service
•	NFT Service
•	Blockchain Gateway Service
Общие сервисы
•	User Service
•	Logging & Analytics
Все сервисы:
•	независимы,
•	имеют собственную БД,
•	общаются через события и HTTP.
________________________________________
5. Event-Driven Core
Сервисы публикуют события:
quest.completed
reaction.created
reaction.review
voucher.purchased
premium_voucher.purchased
rf.partner_joined
rielt.contact_request
referral.joined
referral.activated
user.vip_upgraded
Все события потребляет Connect Service, который решает:
•	начислять Points?
•	выдавать NFT?
•	производить ончейн-операцию G2A?
________________________________________
6. Data Ownership
Atlas — владеет:
•	странами, городами, категориями мест, POI.
Pulse — владеет:
•	событиями, расписаниями.
RF — владеет:
•	заведениями, ваучерами.
Quest — владеет:
•	квестами, чекпоинтами, прохождениями.
Content — владеет:
•	постами.
Reactions — владеет:
•	реакциями, тредами, отзывами.
Rielt — владеет:
•	объявлениями, контактными запросами.
Connect/Points/NFT — владеют:
•	экономическими событиями, счетами и NFT-профилем.
________________________________________
7. API Architecture
7.1. API Gateway (поэтапно вводится)
Функции:
•	агрегация запросов,
•	авторизация,
•	rate limits,
•	openapi-спецификации,
•	валидация.
7.2. Прямые вызовы сервисов
FE вызывает сервисы через:
/api/atlas/v1/...
/api/pulse/v1/...
/api/guru/v1/...
7.3. Внутренние API
Сервисы вызывают друг друга только по белому списку.
________________________________________
8. Tokenomics Architecture
Контур 1 — Points
Хранятся в Points Service.
Используются во внутренних сценариях (квесты, RF).
Контур 2 — NFT
NFT Service:
•	уровни,
•	прогресс,
•	бейджи,
•	привязка к пользователю.
Контур 3 — G2A Token (TON)
Blockchain Gateway:
•	mint,
•	burn,
•	transfer.
Центр — Connect Service
Получает события → определяет награду → вызывает Points/NFT/Gateway.
________________________________________
9. Communication Architecture
Платформа построена без чатов:
используются:
•	reactions (все формы взаимодействия),
•	threads — мини-диалоги,
•	notifications — ответы, события, обновления.
Причины:
•	снижение нагрузки,
•	единая модель,
•	удобство модерации,
•	юридическая прозрачность.
________________________________________
10. Observability Architecture
Состоит из трёх подсистем:
Logging
Все сервисы → централизованное логирование (ELK или OpenSearch).
Metrics
Prometheus + Grafana.
Distributed Tracing
Jaeger / OpenTelemetry.
Везде используются:
•	trace_id,
•	span_id,
•	correlation_id.
________________________________________
11. AI & Multi-Agent Architecture
Go2Asia развивается через мультиагентную разработку:
AI-агенты:
•	Cursor multi-agent coding,
•	Bolt.New UI generator,
•	Analytics agents,
•	Content generation agents.
AI-слой получает контекст из:
•	/docs/overview/,
•	/docs/backend/,
•	/docs/modules/,
•	.cursor-rules.
Это позволяет:
•	ускорять разработку,
•	минимизировать ошибки,
•	сохранять единый архитектурный стиль.
________________________________________
12. Масштабирование
Горизонтальное масштабирование:
•	сервисы → Kubernetes / serverless контейнеры,
•	FE-модули → CDN + edge.
Вертикальное масштабирование:
•	кеширование на уровне Redis,
•	репликация БД.
Edge-архитектура:
•	Guru near-you → оптимизация на edge workerах.
________________________________________
13. Резюме архитектуры
Go2Asia — комплексная экосистема, объединяющая:
•	микросервисы,
•	микрофронтенды,
•	событийную экономику,
•	реакционную коммуникацию,
•	двухконтурную токеномику,
•	AI-ориентированную разработку,
•	единый UX-центр через Guru,
•	единый социальный слой через Space.
Этот документ служит фундаментом для проектирования, масштабирования и развития системы.
