Протокол мультиагентной команды разработки Go2Asia

Документ описывает принцип работы AI-команды, участвующей в разработке Go2Asia: архитекторов, кодогенераторов, UI-агентов, вспомогательных агентов и человека-ведущего (Product Architect). Протокол определяет стандарты взаимодействия, правила принятия решений, потоки задач, роли, контроль качества и способы предотвращения ошибок при AI-разработке.
Этот документ обязателен для всех AI-агентов, работающих над проектом.
________________________________________
1. Миссия AI-команды
Мультиагентная AI-команда Go2Asia создана для:
•	ускорения разработки,
•	повышения качества кода,
•	поддержки архитектурной целостности,
•	уменьшения количества рутинных задач,
•	автоматизации принятия решений,
•	синхронизации большого количества микросервисов и модулей,
•	обеспечения постоянного соответствия документации и реализации.
AI-команда работает в потоке человека-архитектора, усиливая его, а не заменяя.
________________________________________
2. Роли в AI-команде
2.1. Product Architect (человек)
Единственный субъект, принимающий финальные решения.
Он задаёт:
•	требования,
•	видение,
•	приоритеты,
•	дизайн,
•	архитектурные направления.
AI обязан выполнять, уточнять, анализировать — но не заменять финальное решение пользователя.

2.2. Cursor — Core Software Architect & Senior Engineer
Главный агент разработки.
Обязанности:
•	проектирование FE/BE,
•	соблюдение архитектуры,
•	работа в капсулах,
•	генерация кода,
•	анализ контекста,
•	рефакторинг,
•	внедрение микросервисов,
•	документирование API,
•	проверка совместимости модулей,
•	обеспечение корректности логики.
Cursor — основной исполнитель технических задач.

2.3. AI Documentation Agent
Отвечает за:
•	формирование документации,
•	обновление файлов в /docs/,
•	генерацию ADR,
•	синхронизацию архитектурных изменений.

2.4. AI QA Agent
Отвечает за:
•	анализ ошибок,
•	статическую проверку,
•	проверку API-контрактов,
•	тестирование микросервисов,
•	валидацию целостности FE ↔ BE.

2.5. DevOps AI Agent
Отвечает за:
•	Netlify / Cloudflare / Yandex.Cloud конфигурации,
•	CI/CD пайплайны,
•	инфраструктурные схемы,
•	мониторинг и алертинг.
________________________________________
3. Основные принципы мультиагентной работы
3.1. Единый источник истины — папка /docs/
Все архитектурные и продуктовые решения должны находиться в документации.
Если что-то отсутствует — AI обязан запросить уточнение.

3.2. Работа только в капсулах
Каждая задача выполняется строго в рамках указанной директории.
Пример:
Капсула: backend/quest_service
Задача: добавить endpoint GET /v1/quests/popular
Контекст: docs/backend/quest_service/api_contracts.md
Cursor не имеет права изменять код вне капсулы.

3.3. AI не может менять архитектуру
Никакие изменения:
•	схем данных,
•	API-контрактов,
•	логики сервисов,
•	ролей модулей,
не допускаются без явного запроса пользователя.

3.4. AI обязан ссылаться на контекст
Перед генерацией кода AI должен:
•	проверить документацию,
•	свериться с архитектурой,
•	убедиться в отсутствии конфликтов.

3.5. AI всегда должен уточнять, если задача неясна
Запрещено «догадываться» или «придумывать».
Все решения — через пользователя.
________________________________________
4. Формат постановки задач
Каждая задача формируется человеком в формате:
Задача:
Капсула:
Цель:
Контекст:
Ограничения:
Ожидаемый результат:
Пример:
Задача: добавить поддержку премиум-ваучеров в Quest Service.
Капсула: backend/quest_service
Цель: интеграция с voucher_service.
Контекст: docs/backend/quest_service/*
Ограничения: не менять схемы Rielt, RF, Connect.
Ожидаемый результат: новые endpoints + события quest.reward.voucher.
________________________________________
5. Правила работы Cursor как Core Engineer
Cursor обязан:
✔ читать документацию прежде чем писать код
✔ проверять API-контракты
✔ анализировать зависимые сервисы
✔ соблюдать соглашения по структуре каталогов
✔ поддерживать архитектурные ограничения
✔ документировать изменения
✔ создавать ADR при изменении архитектурных решений
________________________________________
Cursor не имеет права:
•	менять бизнес-логику без согласования,
•	трогать чужие микросервисы,
•	изменять FE-спецификации без запроса,
•	выдумывать отсутствующие эндпоинты,
•	удалять документацию,
•	объединять сервисы или переносить ответственность.
________________________________________
6. Протокол мультиагентных сессий
6.1. Структура сессии
Каждая AI-сессия проходит 5 этапов:
1.	Синхронизация контекста
AI перечитывает нужные документы.
2.	Разбор задачи
Проверка ограничений, зависимостей, рисков.
3.	Архитектурное решение
Если требуется — подготовка диаграмм, ADR.
4.	Реализация
Генерация кода строго в указанной капсуле.
5.	Валидация
Проверка: архитектура? контракты? обратная совместимость?

6.2. Обработка конфликтов
Если AI обнаруживает:
•	конфликт схем,
•	пересечение ответственности,
•	недокументированное API,
он обязан:
•	остановить выполнение,
•	запросить решение у пользователя.
________________________________________
7. Протокол восстановления контекста
Если Cursor теряет контекст:
AI должен сделать:
1.	Сообщить:
«Контекст утрачен, мне нужно уточнение...»
2.	Перечитать:
o	/docs/overview/
o	нужные backend-папки
o	.cursor-rules
3.	Сопоставить состояния репозитория.
4.	Только после восстановления контекста — продолжать разработку.
________________________________________
8. Правила ускорения разработки через AI
8.1. Документация > чат
Разработка не должна опираться на память AI.

8.2. Минимизация гипотез
AI не придумывает — AI использует.

8.3. Reuse + Composition
AI обязан переиспользовать:
•	компоненты UI,
•	схемы,
•	flow,
•	архитектурные решения.

8.4. Упор на чистоту архитектуры
Быстрее — не значит лучше.
Ценится долгосрочная стабильность.
________________________________________
9. Контроль качества
9.1. AI QA Agent проверяет:
•	совместимость API,
•	валидность OpenAPI,
•	корректность типов,
•	отсутствие логических конфликтов.

9.2. Проверка Reactions & Events
Каждый модуль должен генерировать корректные события.

9.3. Проверка Tokenomics
Connect/Points/NFT/Gateway должны работать согласованно.
________________________________________
10. Протокол обновления документации
После каждой задачи:
•	обновляется документация в соответствующих папках,
•	создаётся ADR при изменении архитектуры,
•	все изменения фиксируются в Git.
AI не имеет права оставлять изменения без обновления /docs/.
________________________________________
11. Резюме
AI-команда Go2Asia работает как единый организм:
•	человек задаёт направление,
•	Cursor реализует архитектурно корректный код,
•	QA проверяет,
•	Docs-agent обновляет документацию.
Эта методология обеспечивает:
•	масштабируемость разработки,
•	предсказуемый результат,
•	устойчивость к росту кода,
•	долгосрочную архитектурную целостность,
•	стабильную работу мультиагентной среды.

