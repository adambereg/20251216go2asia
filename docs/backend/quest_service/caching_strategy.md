# Quest Service — Caching Strategy

## Цели

- Быстрая выдача каталога квестов на главной и в Atlas.
- Снижение нагрузки на БД при частых чтениях.

---

## Что кешируем

1. **Каталог квестов**
   - Ключ: `quest:catalog:{city_id}:{hash(filters,sort,page,page_size)}`
   - TTL: 1–5 минут.

2. **Детальный квест**
   - Ключ: `quest:details:{quest_id}`
   - TTL: 5–10 минут.
   - Инвалидируется при изменении/публикации квеста.

3. **Базовая информация для internal API**
   - Ключ: `quest:basic:{quest_id}` (если появятся такие endpoints).

---

## Что не кешируем

- Прогресс по чекпоинтам (`QuestRun`, `CheckpointProgress`).
- Состояние наград.

---

## Технология

- Redis как основной кеш.
- HTTP-ответы каталога могут дополнительно использовать `Cache-Control` и ETag
  для фронтенд-кеша (PWA).
