# User Service — Validation Rules

## Email

- Обязателен при регистрации (если это не чистый OAuth).
- Формат RFC 5322 (стандартные email-валидаторы).
- Приведение к нижнему регистру.
- Уникальность в системе.

## Пароль

- Минимальная длина: 8–10 символов (можно больше).
- Требования:
  - хотя бы одна буква,
  - хотя бы одна цифра,
  - желательно хотя бы один спецсимвол.
- Хранится только в виде хэша (Argon2/bcrypt).

## Username

- Опциональный, но если указан:
  - латиница, цифры, `_` и `.`,
  - длина: 3–32,
  - уникальный.
- Нельзя использовать зарезервированные слова: `admin`, `system`, `go2asia`, и т.п.

## Display Name

- Длина: 1–64 символа.
- Разрешены unicode-символы (имя на русском ок).

## Bio

- Максимум 500–1000 символов.

## Телефон

- Рекомендуемый формат — близкий к E.164 (`+84...`).
- Необязателен.
- Если указан и отмечен как публичный — показывается в Guru/Space.

## Контакты PRO

- `contacts_public.telegram` — строка, без пробелов, длина ≤ 64.
- `contacts_public.website` — валидный URL.
- Нельзя сохранять эти поля как публичные без явного флага/согласия (UI и бизнес-логика должны это обеспечить).

## Роли

- `primary_role` должен быть одним из допустимых enum.
- Переход `user → pro` допускается только:
  - через админские эндпоинты,
  - либо через отдельный бизнес-процесс (проверка Connect/Points, будущая логика).

## Privacy Settings

- `profile_visibility` — только `public`, `registered_only`, `friends_only`.
- `show_in_search` — bool.
- `show_current_location` — bool.

## Rate Limits

- На auth-эндпоинты (register/login/reset-password):
  - лимит по IP и по email (чтобы избежать brute force).
