# User Service — Обзор

## Назначение

User Service (Identity Service) — базовый микросервис экосистемы Go2Asia, отвечающий за:

- регистрацию и аутентификацию пользователей;
- выдачу и валидацию JWT-токенов;
- базовые профили (аватар, имя, языки, роли, контакты);
- социальный граф (друзья / подписки / блокировки);
- настройки приватности и уведомлений.

Это **единственная точка истины по пользователям и ролям**. Все остальные сервисы доверяют ему для идентификации и контроля доступа.   

## Основные сценарии

- Регистрация по email + пароль (MVP) + (опционально) OAuth (Google/VK и т.п.).
- Логин и обновление токенов (access/refresh).
- Подтверждение email, сброс пароля.
- Получение и обновление профиля текущего пользователя (`/me`).
- Поиск и просмотр публичных профилей других пользователей.
- Управление ролями (user → VIP → PRO, модераторы, админы).
- Социальные связи: follow / unfollow, друзья, блокировки.
- Управление флагом:
  - `visible_in_guru` — отображать ли пользователя как PRO-гуру в Guru Asia.
- Хранение публичных контактных данных PRO:
  - Telegram, телефон, WhatsApp, website — для вывода в Guru и Space.

## Роль в экосистеме

- **Atlas / Pulse / Media / Rielt / RF / Quest / Space / Guru**:
  - принимают только запросы с валидным JWT от User Service;
  - проверка ролей (VIP/PRO/admin) тоже опирается на JWT;
- **Guru Service**:
  - получает от User Service список PRO c `visible_in_guru = true` и их контакты;
- **Referral / Connect / Points / NFT**:
  - используют `user_id` и роли для начисления наград и привилегий;
- **Notification Service**:
  - получает email и настройки уведомлений для отправки писем и push.

Остановка User Service = невозможность логина и проверки прав, поэтому он проектируется максимально отказоустойчивым.
