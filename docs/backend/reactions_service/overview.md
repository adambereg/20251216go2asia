# Reactions Service — Обзор (обновлённая модель без комментариев)

## Назначение

**Reactions Service** — универсальный микросервис, отвечающий за все формы
пользовательского взаимодействия с контентом и сущностями в экосистеме Go2Asia.

С учётом новой модели коммуникации сервис:

- **полностью заменяет классические комментарии и большую часть сценариев чата;**
- служит центральным слоем социального взаимодействия;
- фиксирует любое действие пользователя по отношению к объекту платформы
  как **структурированную реакцию**.

## Базовая идея

> Реакция = любое взаимодействие пользователя с объектом (или другим пользователем через объект).

Каждая реакция описывается:

- `type` — тип реакции;
- `target` — пара (`target_type`, `target_id`), например:
  - `space_post:123`,
  - `atlas_place:456`,
  - `rf_partner:789`,
  - `rielt_booking:...`;
- `user_id` — кто инициировал реакцию;
- `payload` (опционально) — текст, оценка, ссылка на пост, данные вопроса и т.п.;
- `meta` — дата, язык клиента, платформа и др.

## Типы реакций (расширенная модель)

Примеры типов (список расширяемый, но базовое ядро такое):

- `like` — отметка «понравилось».
- `repost` — репост контента (в т.ч. «репост с мнением», создающий новый пост в Space Asia).
- `rating` — оценка (место, жильё, событие и др.).
- `short_review` — короткий отзыв (до N символов).
- `feedback` — текстовая реакция общего типа (чуть длиннее, чем short_review).
- `completed` — прохождение квеста, выполнение задания и т.п.
- `bookmark` — сохранение объекта в избранное.
- `question` — вопрос автору/организатору (запускает ветку общения).
- `contact_request` — запрос на контакт/связь (например, перед бронью жилья).
- `thread_reply` — ответ внутри созданной «ветки общения» (thread), используется для асинхронного общения.

Дополнительно могут использоваться статусные реакции:

- `was_here`, `want_to_visit` — для мест (Atlas),
- `going`, `interested` — для событий (Pulse),
- и любые другие, согласованные на уровне конфигурации.

## Роль сервиса в архитектуре

Reactions Service:

- хранит **единый журнал реакций**;
- умеет агрегировать статистику (кол-во лайков, рейтинг, число репостов, отметок «был здесь» и т.п.);
- обслуживает **ветки общения (threads)** для асинхронных диалогов (вместо чата);
- отправляет события в Event Bus (`reaction.created`, `reaction.deleted`, `thread.reply.created` и др.);
- интегрируется с:
  - Notification Service (уведомления),
  - Connect / Points / NFT / Token Services (вознаграждения за реактивность — репосты, отзывы, завершения квестов),
  - Space Service (создание постов при репосте с мнением),
  - контент-сервисами (Atlas, Pulse, Blog, RF, Quest, Rielt и др.) для получения статистики.

В экосистеме **нет классических комментариев** и real-time чатов — вся коммуникация
структурирована через реакции и облегчённую модель **Thread / Inquiry**.
