# Atlas Service — Интеграции с другими сервисами

## User Service

- Используется для:
  - проверки JWT;
  - получения базовой информации о пользователе (ID, роли) при UGC-операциях.
- Atlas хранит только `created_by_user_id`, `updated_by_user_id`, но не дублирует профиль. :contentReference[oaicite:9]{index=9}  

## Guru Service

- Основной потребитель `nearby` и базовых данных мест/городов. :contentReference[oaicite:10]{index=10}  
- Guru вызывает:
  - `GET /places/nearby` для поиска мест вокруг координат;
  - `GET /cities/{id}` и `GET /countries/{id}` для контекста.
- Atlas публикует события о новых/обновлённых местах, чтобы Guru мог обновлять кеш/индексы.

## Pulse Service (события)

- Хранит `place_id` для каждого события.
- При создании/редактировании события фронтенд Pulse:
  - использует Atlas для поиска и выбора места;
- При отображении событий:
  - Pulse может делать запросы в Atlas для получения названия и адреса места.

## Rielt Service (жильё)

- При сохранении объявления Rielt:
  - определяет город/район через Atlas (по координатам/адресу);
- Может опционально связывать объявление с конкретным Place, если это, например, объект в ТЦ или жилом комплексе.

## RF Service (Russian Friendly)

- RF-места — подмножество Atlas Places, помеченное `rf_badge = true`; :contentReference[oaicite:11]{index=11}  
- RF хранит свои доп. поля (контактное лицо, условия партнёрства), но для адреса/координат всегда опирается на Atlas.
- Связь:
  - `place.rf_place_id` ↔ RF Place ID;
  - событийные интеграции: при изменении статуса партнёра RF может инициировать обновление `rf_badge` в Atlas.

## Media Service (Blog)

- Статьи могут привязываться к:
  - `city_id`;
  - `place_id`.
- Atlas выступает базой для:
  - формирования подборок статей по городу/месту;
  - ссылок «Статьи об этом месте» на детальной странице Place.

## Quest Service

- Квесты используют:
  - список мест (выбор точек маршрута);
  - валидацию `place_id` при конфигурации квеста. :contentReference[oaicite:12]{index=12}  
- Atlas — гарант, что квесты используют реальные объекты.

## Reactions Service

- Хранит реакции на Places (`target_type = "place"`).
- Atlas может:
  - запрашивать агрегаты по Place (рейтинг, число отзывов);
  - периодически синхронизировать эти данные в свои поля `rating_avg`, `rating_count` (для быстрого чтения).

## Notification Service

- Могут быть гео-уведомления, связанные с местами:
  - «Новая достопримечательность добавлена в вашем городе»;
  - «Новое RF-место рядом».
- Источник данных о месте — Atlas.

## Blockchain / Tokenomics

- Прямая связь с Token/Points/NFT — минимальная.
- Возможна косвенная:
  - награждение редакторов или PRO, добавивших/обновивших место.
- В этом случае Atlas публикует события в Token Service, но сам не содержит экономическую логику.
