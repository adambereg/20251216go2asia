# Logging & Analytics Service — Roadmap

Дорожная карта развития слоя наблюдаемости Go2Asia.

---

## Фаза 0 — Базовый foundation (старт проекта)

Цели:

- Не допустить «немых» сервисов.
- Сразу заложить фундамент для отладки.

Функции:

- JSON-логирование во всех микросервисах.
- Базовый correlation_id:
  - генерируется в BFF / первом сервисе,
  - прокидывается дальше.
- Простейшие метрики:
  - `http_requests_total`,
  - `http_request_duration_seconds`,
  - `http_requests_errors_total`.
- Начальная интеграция с Prometheus и Grafana (технические дашборды).

---

## Фаза 1 — Полноценный Observability Layer

Цели:

- Иметь возможность быстро разбирать инциденты.
- Видеть трассы через все микросервисы.

Функции:

- Внедрение Jaeger/Tempo:
  - spans для всех HTTP/DB запросов.
- Централизованное лог-хранилище (Elastic/ClickHouse).
- Углубление метрик:
  - по каждому микросервису Go2Asia.
- Первые бизнес-метрики:
  - квесты,
  - ваучеры,
  - RF-партнёры,
  - рефералы.

---

## Фаза 2 — Продуктовая аналитика и бизнес-дашборды

Цели:

- Понимать поведение пользователей,
- Строить воронки и retention.

Функции:

- Внедрение Analytics Events:
  - `quest_completed`, `voucher_purchased`, `rf_place_viewed`, `rf_partner_clicked`, `city_page_opened` и др.
- Хранилище аналитики (ClickHouse):
  - с преднастроенными витринами.
- BI-дашборды:
  - по модулям (Atlas, Guru, Quest, RF, Voucher),
  - по странам/городам,
  - по типам пользователей (guest / VIP / PRO).

---

## Фаза 3 — Reliability & SLO/SLA

Цели:

- Управлять качеством сервиса по SLO,
- Реагировать на проблемы до того, как они ударят по пользователю.

Функции:

- Определение SLO:
  - например, 99% запросов Geo Search < 1.5 s.
- Настройка алертинга по SLO, а не только по инфраструктурным метрикам.
- Capacity planning:
  - наблюдение за трендами нагрузки,
  - прогнозирование необходимых ресурсов.

---

## Фаза 4 — Продвинутая аналитика и AI/Ops (далёкая перспектива)

Цели:

- Автоматизировать часть анализа и реакции на инциденты.
- Использовать ML для обнаружения аномалий.

Функции:

- ML-анализ аномалий:
  - нестандартные паттерны поведения пользователей,
  - аномальный рост ошибок/латентности.
- AI-помощник для DevOps:
  - подсказки по вероятным корням проблемы,
  - рекомендации по настройке алертов.
- Более глубокая продуктовая аналитика:
  - LTV по сегментам,
  - сложные когортные анализы,
  - прогноз активности по модулям Go2Asia.

---

Эта дорожная карта не обязана быть реализована целиком в MVP.  
Главное — **Фаза 0 и Фаза 1**: без них мультисервисная, мультиагентная платформа Go2Asia будет «слепой» и плохо управляемой.
