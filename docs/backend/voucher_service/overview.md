# Voucher Service — Обзор

## Назначение

Voucher Service — микросервис, который отвечает за **купонную/ваучерную систему** Go2Asia:

- промокоды и купоны на скидку;
- ваучеры на бесплатные/со скидкой услуги партнёров Russian Friendly;
- сертификаты/бонусы, которые пользователь получает за активность (через Points/NFT и др.);
- технический API для валидации и списания ваучеров при оплате/бронировании.

Сервис **не занимается приёмом платежей**, он только:

- хранит определение ваучера (условия, скидка, срок, ограничения);
- проверяет, можно ли применить ваучер в данном контексте;
- помечает ваучер как использованный (частично или полностью);
- ведёт историю погашений (redemptions).

## Основные функции

- **Создание ваучеров**:
  - через админку (модераторы/операторы);
  - через Partner/RF-интерфейс (партнёрские купоны);
  - через автоматические механизмы (награда за действия, интеграция с Points Service).
- **Типы ваучеров (MVP)**:
  - фиксированная скидка (например, 500 ₽ на счёт в RF-кафе);
  - процентная скидка (например, -10% на счёт или на бронирование жилья);
  - “бонус” (например, ваучер даёт N Points — можно отложить на будущее).
- **Условия применения**:
  - модуль (RF, Rielt, Quest и т.п.);
  - тип операции (оплата счёта, бронирование жилья, покупка билета на квест);
  - минимальная сумма заказа;
  - список партнёров/объектов, на которые распространяется ваучер (или наоборот — исключения);
  - лимиты использования: общий, на пользователя, по времени.
- **Валидация и погашение**:
  - API проверки промокода (показывает потенциальную скидку);
  - API “atomic redeem” — одновременно проверяет и списывает ваучер (чтобы избежать гонок).
- **Отчётность**:
  - кто, когда и где применил ваучер;
  - оставшийся лимит использования;
  - статистика по кампании.

## Роль в экосистеме

- **RF Service (Russian Friendly)**:
  - партнёрские купоны на скидку в заведениях;
  - спец-акции “-10% на кофе в RF-партнёрах в Нячанге”.
- **Rielt Service**:
  - промокоды на скидку/комиссию при бронировании жилья;
  - специальные условия для PRO/LOYAL пользователей.
- **Quest Service**:
  - ваучеры на бесплатное участие/скидку в квестах.
- **Points Service**:
  - обмен Points на ваучеры (по типу “купить купон за 1000 Points”).
- **Notification Service**:
  - рассылка уведомлений/писем с новыми персональными ваучерами.

### Обычные ваучеры vs Премиум-ваучеры

В экосистеме Go2Asia выделяются два основных класса ваучеров:

1. **Обычный ваучер бизнес-партнёра**
   - даёт скидку / бонус / услугу;
   - может покупаться за Points или выдаваться бесплатно;
   - не включает сложной ончейн-экономики.

2. **Премиум-ваучер бизнес-партнёра**
   - продаётся путешественнику (обычно VIP-спейсеру);
   - оплата идёт **в токенах G2A** (off-chain учёт + опциональный on-chain через Blockchain Gateway);
   - дополнительно “стоимость” включает компонент **NFT**:
     - либо требуется наличие/уровень NFT (доступ только для владельцев NFT нужного уровня),
     - либо при покупке Premium-ваучера минтится/апгрейдится NFT определённого уровня,
     - конкретный сценарий задаётся в economics-параметрах ваучера.

Экономика Премиум-ваучера:

- **Бизнес-партнёр** получает компенсацию в токенах G2A  
  с каждой покупки Премиум-ваучера (размер фиксируется в настройках ваучера).
- **PRO-спейсер**, курирующий этого бизнес-партнёра, получает вознаграждение в G2A  
  за каждую покупку Премиум-ваучера (партнёрские отчисления).
- **VIP-спейсер (путешественник)** при покупке:
  - платит токенами G2A (и при необходимости тратит/запирает NFT определённого уровня);
  - затем использует Премиум-ваучер как усиленную скидку/бонус/услугу у партнёра.

Voucher Service фиксирует правила и факты выпуска/погашения Премиум-ваучеров;  
движение токенов G2A и NFT выполняется через **Token / Points / NFT / Blockchain Gateway** сервисы.


Voucher Service — единая точка правды по всем “скидочным” механикам, к которой обращаются различные модули.
