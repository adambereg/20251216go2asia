# Notification Service — Caching Strategy

## Цели

- Ускорить доступ к:
  - часто используемым шаблонам уведомлений,
  - настройкам пользователя (предпочтения),
  - базовой статистике (опционально).
- Снизить нагрузку на БД при большом количестве отправок.

---

## Что кешируем

1. **NotificationTemplate**

- Ключ: `notif:template:{template_key}:{channel}:{locale}`
- TTL: достаточно большой (часы/дни), с инвалидацией при изменении шаблона.

2. **NotificationPreference** (Фаза 2)

- Ключ: `notif:pref:{user_id}`
- TTL: умеренный (минута–10 минут),
- использование:
  - при решении, отправлять ли уведомление,
  - какой канал использовать.

---

## Что обычно не кешируем

- сами записи `Notification`:
  - они используются как log/история,
  - выборка по пользователю и времени хорошо ложится на БД с индексами.

---

## Технология

- Redis как основной кеш-слой.
- Инвалидация:
  - при обновлении шаблонов и предпочтений — явная очистка ключей.

---

## Дополнительно (позже)

- Можно кешировать агрегированную статистику:
  - кол-во отправленных/открытых уведомлений по типу за период,
  - для админ-дашбордов.
