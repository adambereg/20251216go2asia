# Blockchain Gateway Service — Caching Strategy

У Blockchain Gateway особые требования: часть данных должна быть строго консистентна, часть можно кешировать.

## 1. Кешируем

### 1.1. Статус TON-ноды / TonAPI

- health‑проверки,
- последний известный блок,
- версия ноды.

TTL: 5–15 секунд, чтобы не нагружать провайдера.

### 1.2. WalletBinding

- Привязки кошельков читаются чаще, чем изменяются.
- Можно кешировать:
  - `wallet_binding:user:{user_id}` со списком привязанных адресов.
- TTL: 30–60 секунд.

---

## 2. Не кешируем

- `BlockchainTask`:
  - статусы задач должны обновляться как можно ближе к реальному времени.
  - чтение идёт напрямую из БД.
- Результаты callback’ов и статусы транзакций.
- Логи и аудиторские записи.

---

## 3. Взаимодействие с внешними кешами

Возможна дополнительная оптимизация:

- BFF/API Gateway может кешировать:
  - публичный статус «здоровья» блокчейн‑инфраструктуры,
  - агрегированную статистику по числу операций,
- Но ключевые данные (`BlockchainTask`, `WalletBinding`) должны храниться в первичной БД Gateway.
