# Referral Service — Roadmap

## Этап 1 — Базовая двухуровневая реферальная программа

- Кампании:
  - `user_invite_default`,
  - базовая `quest_purchase_default`.
- Модели:
  - ReferralCampaign, ReferralLink, ReferralRelation, ReferralEvent, ReferralReward.
- Функциональность:
  - двухуровневая схема (рефералы/субрефералы),
  - блокировка части наград до VIP/PRO,
  - базовая статистика в личном кабинете.

## Этап 2 — Интеграция с ваучерами и арендой

- Добавить события:
  - `voucher_premium_purchased`,
  - `rielt_booking_made`.
- Развернуть кампании:
  - реферальные вознаграждения за ваучеры и брони.

## Этап 3 — Гибкие правила и лимиты

- Расширение `reward_rules`:
  - проценты от суммы,
  - динамические лимиты,
  - комбинации начислений Points/G2A.
- Антифрод:
  - дополнительные проверки,
  - лимиты на количество рефералов/событий в день.

## Этап 4 — Расширенные отчёты и визуализация дерева

- Дашборды для пользователей:
  - дерево рефералов/субрефералов,
  - история наград (отдельно за регистрции, отдельно за покупки).
- Дашборды для админов:
  - эффективность кампаний,
  - LTV реферальных пользователей.

## Этап 5 — A/B-тесты и интеллектуальная оптимизация

- Возможность создавать несколько кампаний с разными `reward_rules` для одинаковых событий.
- Интеграция с Analytics:
  - автоматические рекомендации по оптимизации схемы вознаграждений (какие кампании дают лучший эффект).
