# Pulse Service — Интеграция с другими сервисами

## Atlas Service

- Pulse **использует Atlas как источник правды по локациям**:
  - `country_id`, `city_id`, `place_id` — ссылки на сущности Atlas;
  - при создании/редактировании события Pulse:
    - проверяет существование `place_id`;
    - не хранит копию адреса, а получает его из Atlas при необходимости.

Схема:
- `POST /events` → Pulse вызывает Atlas (`GET /places/{id}`) для валидации;
- фронт/агрегаторы (Guru, Atlas UI) при отображении берут название и адрес из Atlas.

## Guru Service

- Guru запрашивает список событий рядом через:
  - `GET /api/pulse/v1/events/nearby`.
- Pulse:
  - использует координаты мест (из Atlas) для расчёта расстояния;
  - отдаёт компактные карточки с полем `distance_m`.

## Space / Content Service

(Фаза 2)

- При `pulse.event_published`:
  - Space может создавать пост/тред "Событие X".
- При активности пользователей (отметки "иду", "я был" и т.п.):
  - Space/Content могут отправлять события в Pulse или Connect для аналитики и наград.

## Quest Service

- При проектировании квеста PRO выбирает шаг “Посетите событие”:
  - Quest вызывает `GET /events` для выбора доступных событий.
- В структуре квеста хранятся `event_id`:
  - Quest использует Pulse API, чтобы валидировать доступность события (ещё актуально или нет).

## Connect / Token / Points / NFT

(Фаза 2–3)

- Pulse публикует в Event Bus события:
  - `pulse.event_published`
  - `pulse.event_finished`
  - (опц.) `pulse.event_popularity_updated`.
- Connect/Token Service:
  - слушает эти события для начисления наград:
    - PRO за количество проведённых событий;
    - партнёру RF за активность;
    - пользователям за участие (если требуется).

## Blog (Media Service)

- Редакция Blog может:
  - выбирать интересные прошедшие события из Pulse (архив) для репортажей;
  - привязывать статьи к `event_id` или `city_id`.
- Страница события в Pulse может показывать:
  - блок "Материалы и репортажи" из Blog, привязанные к этому событию/городу.

## Notification Service

(Фаза 2)

- Pulse отправляет:
  - запросы на уведомления пользователям о:
    - ближайших событиях по подписке;
    - изменениях статуса (отмена/перенос);
    - начавшихся/скоро начнётся событиях (reminder).
- Через Event Bus:
  - `pulse.event_published` и др. события обрабатываются Notification Service.

## Logging & Analytics Service

- Все ключевые действия (создание, публикация, отмена) логируются.
- Метрики:
  - количество событий по городам;
  - активность PRO-организаторов;
  - популярность категорий.
